<!doctype html><html lang="en"><head><title data-rh="true">When should we prefer OwnsMany over HasMany in EF core? | by Amr elshaer | Medium</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=1"/><meta data-rh="true" name="theme-color" content="#000000"/><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"/><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"/><meta data-rh="true" property="al:ios:app_name" content="Medium"/><meta data-rh="true" property="al:ios:app_store_id" content="828256236"/><meta data-rh="true" property="al:android:package" content="com.medium.reader"/><meta data-rh="true" property="fb:app_id" content="542599432471018"/><meta data-rh="true" property="og:site_name" content="Medium"/><meta data-rh="true" name="apple-itunes-app" content="app-id=828256236, app-argument=/when-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016, affiliate-data=pt=698524&amp;ct=smart_app_banner&amp;mt=8"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="article:published_time" content="2023-09-16T13:04:20.130Z"/><meta data-rh="true" name="title" content="When should we prefer OwnsMany over HasMany in EF core? | by Amr elshaer | Medium"/><meta data-rh="true" property="og:title" content="When should we prefer OwnsMany over HasMany in EF core?"/><meta data-rh="true" property="al:android:url" content="medium://p/37bce4205016"/><meta data-rh="true" property="al:ios:url" content="medium://p/37bce4205016"/><meta data-rh="true" property="al:android:app_name" content="Medium"/><meta data-rh="true" name="description" content="When should we prefer OwnsMany over HasMany in EF core? In Entity Framework Core (EF Core), OwnsMany and HasMany are two different methods used to define relationships between entities. They are used …"/><meta data-rh="true" property="og:description" content="In Entity Framework Core (EF Core), OwnsMany and HasMany are two different methods used to define relationships between entities. They are…"/><meta data-rh="true" property="og:url" content="https://amrelsher07.medium.com/when-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016"/><meta data-rh="true" property="al:web:url" content="https://amrelsher07.medium.com/when-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016"/><meta data-rh="true" property="og:image" content="https://miro.medium.com/v2/resize:fit:1200/1*XsUZc4RjlIiy8TBHp858PA.png"/><meta data-rh="true" property="article:author" content="https://amrelsher07.medium.com"/><meta data-rh="true" name="author" content="Amr elshaer"/><meta data-rh="true" name="robots" content="index,noarchive,follow,max-image-preview:large"/><meta data-rh="true" name="referrer" content="unsafe-url"/><meta data-rh="true" property="twitter:title" content="When should we prefer OwnsMany over HasMany in EF core?"/><meta data-rh="true" name="twitter:site" content="@Medium"/><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/37bce4205016"/><meta data-rh="true" property="twitter:description" content="In Entity Framework Core (EF Core), OwnsMany and HasMany are two different methods used to define relationships between entities. They are…"/><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/v2/resize:fit:1200/1*XsUZc4RjlIiy8TBHp858PA.png"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" name="twitter:creator" content="@AmrElsh97772587"/><meta data-rh="true" name="twitter:label1" content="Reading time"/><meta data-rh="true" name="twitter:data1" content="6 min read"/><link data-rh="true" rel="icon" href="https://miro.medium.com/v2/5d8de952517e8160e40ef9841c781cdc14a5db313057fa3c3de41c6f5b494b19"/><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml"/><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://miro.medium.com/v2/resize:fill:304:304/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://miro.medium.com/v2/resize:fill:240:240/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://miro.medium.com/v2/resize:fill:152:152/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://miro.medium.com/v2/resize:fill:120:120/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="mask-icon" href="https://miro.medium.com/v2/resize:fill:1000:1000/7*GAOKVe--MXbEJmV9230oOQ.png" color="#171717"/><link data-rh="true" rel="preconnect" href="https://glyph.medium.com" crossOrigin=""/><link data-rh="true" rel="manifest" href="/manifest.json"/><link data-rh="true" rel="preconnect" href="https://www.google.com"/><link data-rh="true" rel="preconnect" href="https://www.gstatic.com" crossOrigin=""/><link data-rh="true" id="glyph_preload_link" rel="preload" as="style" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" rel="author" href="https://amrelsher07.medium.com"/><link data-rh="true" rel="canonical" href="https://amrelsher07.medium.com/when-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016"/><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/37bce4205016"/><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@id":"https://amrelsher07.medium.com/when-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016","@type":"SocialMediaPosting","image":["https://miro.medium.com/1*XsUZc4RjlIiy8TBHp858PA.png"],"url":"https://amrelsher07.medium.com/when-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016","dateCreated":"2023-09-16T13:04:20Z","datePublished":"2023-09-16T13:04:20Z","dateModified":"2023-09-16T13:04:20Z","headline":"When should we prefer OwnsMany over HasMany in EF core?","name":"When should we prefer OwnsMany over HasMany in EF core?","description":"When should we prefer OwnsMany over HasMany in EF core? In Entity Framework Core (EF Core), OwnsMany and HasMany are two different methods used to define relationships between entities. They are used …","identifier":"37bce4205016","author":{"@context":"https://schema.org","@id":"https://medium.com/@amrelsher07","@type":"Person","identifier":"amrelsher07","name":"Amr elshaer","url":"https://medium.com/@amrelsher07"},"creator":{"@context":"https://schema.org","@id":"https://medium.com/@amrelsher07","@type":"Person","identifier":"amrelsher07","name":"Amr elshaer","url":"https://medium.com/@amrelsher07"},"publisher":{"@context":"https://schema.org","@type":"Organization","@id":"https://medium.com","name":"Medium","url":"https://medium.com","logo":{"@type":"ImageObject","width":500,"height":110,"url":"https://miro.medium.com/v2/resize:fit:500/7%2AV1_7XP4snlmqrc_0Njontw.png"}},"mainEntityOfPage":"https://amrelsher07.medium.com/when-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016","isAccessibleForFree":true}</script><script data-rh="true" src="https://www.google.com/recaptcha/enterprise.js?render=6Le-uGgpAAAAAPprRaokM8AKthQ9KNGdoxaGUvVp" async="true"></script><style type="text/css" data-fela-rehydration="544" data-fela-type="STATIC">html{box-sizing:border-box;-webkit-text-size-adjust:100%}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}:root{--reach-tabs:1;--reach-menu-button:1}#speechify-root{font-family:Sohne, sans-serif}div[data-popper-reference-hidden="true"]{visibility:hidden;pointer-events:none}.grecaptcha-badge{visibility:hidden}
/*XCode style (c) Angel Garcia <angelgarcia.mail@gmail.com>*/.hljs {background: #fff;color: black;
}/* Gray DOCTYPE selectors like WebKit */
.xml .hljs-meta {color: #c0c0c0;
}.hljs-comment,
.hljs-quote {color: #007400;
}.hljs-tag,
.hljs-attribute,
.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-name {color: #aa0d91;
}.hljs-variable,
.hljs-template-variable {color: #3F6E74;
}.hljs-code,
.hljs-string,
.hljs-meta .hljs-string {color: #c41a16;
}.hljs-regexp,
.hljs-link {color: #0E0EFF;
}.hljs-title,
.hljs-symbol,
.hljs-bullet,
.hljs-number {color: #1c00cf;
}.hljs-section,
.hljs-meta {color: #643820;
}.hljs-title.class_,
.hljs-class .hljs-title,
.hljs-type,
.hljs-built_in,
.hljs-params {color: #5c2699;
}.hljs-attr {color: #836C28;
}.hljs-subst {color: #000;
}.hljs-formula {background-color: #eee;font-style: italic;
}.hljs-addition {background-color: #baeeba;
}.hljs-deletion {background-color: #ffc8bd;
}.hljs-selector-id,
.hljs-selector-class {color: #9b703f;
}.hljs-doctag,
.hljs-strong {font-weight: bold;
}.hljs-emphasis {font-style: italic;
}
</style><style type="text/css" data-fela-rehydration="544" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-moz-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}</style><style type="text/css" data-fela-rehydration="544" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.d{display:none}.m{display:block}.n{position:sticky}.o{top:0}.p{z-index:500}.q{padding:0 24px}.r{align-items:center}.s{border-bottom:solid 1px #F2F2F2}.z{height:41px}.ab{line-height:20px}.ac{display:flex}.ae{gap:32px}.af{height:57px}.ag{flex:1 0 auto}.ah{color:inherit}.ai{fill:inherit}.aj{font-size:inherit}.ak{border:none}.al{font-family:inherit}.am{letter-spacing:inherit}.an{font-weight:inherit}.ao{padding:0}.ap{margin:0}.aq{cursor:pointer}.ar:disabled{cursor:not-allowed}.as:disabled{color:#6B6B6B}.at:disabled{fill:#6B6B6B}.aw{width:auto}.ax path{fill:#242424}.ay{height:25px}.az{margin-left:24px}.ba{border-radius:20px}.bb{width:240px}.bc{background:#F9F9F9}.bd path{fill:#6B6B6B}.bf{outline:none}.bg{font-family:sohne, "Helvetica Neue", Helvetica, Arial, sans-serif}.bh{font-size:14px}.bi{width:100%}.bj{padding:10px 20px 10px 0}.bk{background-color:transparent}.bl{color:#242424}.bm::placeholder{color:#6B6B6B}.bn{display:inline-block}.bo{margin-left:12px}.bp{margin-right:12px}.bq{border-radius:4px}.br{height:24px}.bx{background-color:#F9F9F9}.by{border-radius:50%}.bz{height:32px}.ca{width:32px}.cb{flex:0 0 auto}.cd{flex:1 1 auto}.ci{justify-content:center}.co{max-width:680px}.cp{min-width:0}.cq{animation:k1 1.2s ease-in-out infinite}.cr{height:100vh}.cs{margin-bottom:16px}.ct{margin-top:48px}.cu{align-items:flex-start}.cv{flex-direction:column}.cw{justify-content:space-between}.cx{margin-bottom:24px}.dd{width:80%}.de{background-color:#F2F2F2}.dk{height:44px}.dl{width:44px}.dm{margin:auto 0}.dn{margin-bottom:4px}.do{height:16px}.dp{width:120px}.dq{width:80px}.dw{margin-bottom:8px}.dx{width:96%}.dy{width:98%}.dz{width:81%}.ea{margin-left:8px}.eb{color:#6B6B6B}.ec{font-size:13px}.ed{height:100%}.ew{color:#FFFFFF}.ex{fill:#FFFFFF}.ey{background:#1A8917}.ez{border-color:#1A8917}.fd:disabled{cursor:inherit !important}.fe:disabled{opacity:0.3}.ff:disabled:hover{background:#1A8917}.fg:disabled:hover{border-color:#1A8917}.fh{border-radius:99em}.fi{border-width:1px}.fj{border-style:solid}.fk{box-sizing:border-box}.fl{text-decoration:none}.fm{text-align:center}.fn{margin-left:16px}.fo{border:inherit}.fr{position:relative}.fs{fill:#6B6B6B}.ft{gap:8px}.fw{position:absolute}.fx{width:1px}.fy{height:1px}.fz{margin:-1px}.ga{overflow:hidden}.gb{clip:rect(0, 0, 0, 0)}.gc{white-space:nowrap}.gd{border-width:0}.ge{margin-right:32px}.gf{background:transparent}.gg svg{margin-left:4px}.gh svg{fill:#6B6B6B}.gj{box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.05)}.gq{margin:0 24px}.gu{background:rgba(255, 255, 255, 1)}.gv{border:1px solid #F2F2F2}.gw{box-shadow:0 1px 4px #F2F2F2}.gx{max-height:100vh}.gy{overflow-y:auto}.gz{left:0}.ha{top:calc(100vh + 100px)}.hb{bottom:calc(100vh + 100px)}.hc{width:10px}.hd{pointer-events:none}.he{word-break:break-word}.hf{word-wrap:break-word}.hg:after{display:block}.hh:after{content:""}.hi:after{clear:both}.hj{line-height:1.23}.hk{letter-spacing:0}.hl{font-style:normal}.hm{font-weight:700}.iw{gap:12px}.ix{align-items:baseline}.iy{width:36px}.iz{height:36px}.ja{border:2px solid rgba(255, 255, 255, 1)}.jb{z-index:0}.jc{box-shadow:none}.jd{border:1px solid rgba(0, 0, 0, 0.05)}.je{margin-bottom:2px}.jf{flex-wrap:nowrap}.jh{width:12px}.ji{flex-wrap:wrap}.jj{padding-left:8px}.jk{padding-right:8px}.kl> *{flex-shrink:0}.km{overflow-x:scroll}.kn::-webkit-scrollbar{display:none}.ko{scrollbar-width:none}.kp{-ms-overflow-style:none}.kq{width:74px}.kr{flex-direction:row}.ks{z-index:2}.kt{margin-right:4px}.kw{-webkit-user-select:none}.kx{border:0}.ky{fill:rgba(117, 117, 117, 1)}.lb{outline:0}.lc{user-select:none}.ld> svg{pointer-events:none}.lm{cursor:progress}.ln{margin-left:4px}.lo{margin-top:0px}.lp{opacity:1}.lq{padding:4px 0}.lt{width:16px}.lv{display:inline-flex}.mb{max-width:100%}.mc{padding:8px 2px}.md svg{color:#6B6B6B}.mu{line-height:1.58}.mv{letter-spacing:-0.004em}.mw{font-family:source-serif-pro, Georgia, Cambria, "Times New Roman", Times, serif}.nr{margin-bottom:-0.46em}.ns{padding:2px 4px}.nt{font-size:75%}.nu> strong{font-family:inherit}.nv{font-family:source-code-pro, Menlo, Monaco, "Courier New", Courier, monospace}.nw{list-style-type:decimal}.nx{margin-left:30px}.ny{padding-left:0px}.nz{list-style-type:disc}.of{margin-left:auto}.og{margin-right:auto}.oh{max-width:1230px}.on{clear:both}.op{cursor:zoom-in}.oq{z-index:auto}.os{height:auto}.ot{margin-top:10px}.ou{max-width:728px}.ox{margin-top:32px}.oy{margin-bottom:14px}.oz{padding-top:24px}.pa{padding-bottom:10px}.pb{background-color:#000000}.pc{height:3px}.pd{width:3px}.pe{margin-right:20px}.pf{max-width:1340px}.pg{text-decoration:underline}.ph{font-style:italic}.pi{box-shadow:inset 3px 0 0 0 #242424}.pj{padding-left:23px}.pk{margin-left:-20px}.pl{max-width:1540px}.pm{max-width:1840px}.pn{margin-bottom:26px}.po{margin-top:6px}.pp{margin-top:8px}.pq{margin-right:8px}.pr{padding:8px 16px}.ps{border-radius:100px}.pt{transition:background 300ms ease}.pv{border-top:none}.pw{margin-bottom:50px}.px{height:52px}.py{max-height:52px}.pz{box-sizing:content-box}.qa{position:static}.qb{z-index:1}.qd{max-width:155px}.qj{margin-bottom:64px}.qw{height:48px}.qx{width:48px}.qz{height:64px}.ra{width:64px}.rb{align-self:flex-end}.rh{padding-right:4px}.ri{font-weight:500}.rv{white-space:pre-wrap}.rw{margin:0 8px}.rx{margin-top:16px}.sd{height:0px}.st{gap:18px}.su{fill:rgba(61, 61, 61, 1)}.sw{padding-bottom:20px}.sx{border-bottom:1px solid #F2F2F2}.td{fill:#242424}.te{background:0}.tf{border-color:#242424}.th:disabled:hover{color:#242424}.ti:disabled:hover{fill:#242424}.tj:disabled:hover{border-color:#242424}.tu{border-bottom:solid 1px #E5E5E5}.tv{margin-top:72px}.tw{padding:24px 0}.tx{margin-bottom:0px}.ty{margin-right:16px}.au:hover:not(:disabled){color:rgba(25, 25, 25, 1)}.av:hover:not(:disabled){fill:rgba(25, 25, 25, 1)}.fa:hover{background:#156D12}.fb:hover{border-color:#156D12}.fc:hover{cursor:pointer}.fu:hover{color:#242424}.fv:hover{fill:#242424}.gi:hover svg{fill:#242424}.gk:hover{background-color:rgba(0, 0, 0, 0.1)}.jg:hover{text-decoration:underline}.la:hover{fill:rgba(8, 8, 8, 1)}.lr:hover{fill:#000000}.ls:hover p{color:#000000}.lu:hover{color:#000000}.me:hover svg{color:#000000}.pu:hover{background-color:#F2F2F2}.qy:hover{background-color:none}.sv:hover{fill:rgba(25, 25, 25, 1)}.tg:hover{border-color:#242424}.be:focus-within path{fill:#242424}.kz:focus{fill:rgba(8, 8, 8, 1)}.mf:focus svg{color:#000000}.or:focus{transform:scale(1.01)}.le:active{border-style:none}</style><style type="text/css" data-fela-rehydration="544" data-fela-type="RULE" media="all and (min-width: 1080px)">.e{display:none}.bw{width:64px}.cc{display:block}.cn{margin:0 64px}.dc{height:48px}.dj{margin-bottom:52px}.dv{margin-bottom:48px}.em{font-size:14px}.eo{line-height:20px}.eu{font-size:13px}.ev{padding:5px 12px}.fq{display:flex}.gp{margin-bottom:50px}.gt{max-width:680px}.ih{font-size:42px}.ii{margin-top:1.19em}.ij{margin-bottom:32px}.ik{line-height:52px}.il{letter-spacing:-0.011em}.iu{align-items:center}.iv{flex-direction:row}.jx{border-top:solid 1px #F2F2F2}.jy{border-bottom:solid 1px #F2F2F2}.jz{margin:32px 0 0}.ka{padding:3px 8px}.kj> *{margin-right:24px}.kk> :last-child{margin-right:0}.ll{margin-top:0px}.ma{margin:0}.nn{font-size:20px}.no{margin-top:2.14em}.np{line-height:32px}.nq{letter-spacing:-0.003em}.oe{margin-top:1.14em}.om{margin-top:56px}.qi{display:inline-block}.qm{margin-bottom:0}.qn{margin-right:20px}.rc{max-width:500px}.rt{line-height:24px}.ru{letter-spacing:0}.sc{margin-bottom:88px}.sq{font-size:24px}.sr{line-height:30px}.ss{letter-spacing:-0.016em}.tc{margin:40px 0 16px}.to{width:min-width}.tt{padding-top:72px}</style><style type="text/css" data-fela-rehydration="544" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.f{display:none}.lk{margin-top:0px}.ov{margin-left:auto}.ow{text-align:center}.qh{display:inline-block}</style><style type="text/css" data-fela-rehydration="544" data-fela-type="RULE" media="all and (max-width: 903.98px)">.g{display:none}.lj{margin-top:0px}.qg{display:inline-block}</style><style type="text/css" data-fela-rehydration="544" data-fela-type="RULE" media="all and (max-width: 727.98px)">.h{display:none}.lh{margin-top:0px}.li{margin-right:0px}.qf{display:inline-block}</style><style type="text/css" data-fela-rehydration="544" data-fela-type="RULE" media="all and (max-width: 551.98px)">.i{display:none}.t{display:flex}.u{justify-content:space-between}.bs{width:24px}.ce{min-width:100%}.cj{margin:0 24px}.cy{height:40px}.df{margin-bottom:44px}.dr{margin-bottom:32px}.ee{font-size:13px}.ef{line-height:20px}.ep{padding:0px 8px 1px}.gl{margin-bottom:2px}.hn{font-size:32px}.ho{margin-top:1.01em}.hp{margin-bottom:24px}.hq{line-height:38px}.hr{letter-spacing:-0.014em}.im{align-items:flex-start}.in{flex-direction:column-reverse}.jl{margin:24px -24px 0}.jm{padding:0}.kb> *{margin-right:8px}.kc> :last-child{margin-right:24px}.ku{margin-left:0px}.lf{margin-top:0px}.lg{margin-right:0px}.lw{margin:0}.mg{border:1px solid #F2F2F2}.mh{border-radius:99em}.mi{padding:0px 16px 0px 12px}.mj{height:38px}.mk{align-items:center}.mm svg{margin-right:8px}.mx{font-size:18px}.my{margin-top:1.56em}.mz{line-height:28px}.na{letter-spacing:-0.003em}.oa{margin-top:1.34em}.oi{margin-top:40px}.qe{display:inline-block}.ql{flex-direction:column}.qu{margin-bottom:20px}.qv{margin-right:0}.rg{max-width:100%}.rj{font-size:24px}.rk{line-height:30px}.rl{letter-spacing:-0.016em}.ry{margin-bottom:64px}.se{font-size:20px}.sf{line-height:24px}.sg{letter-spacing:0}.sy{margin:32px 0 16px}.tk{width:100%}.tp{padding-top:48px}.ml:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="544" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.j{display:none}.bv{width:64px}.ch{min-width:100%}.cm{margin:0 64px}.db{height:48px}.di{margin-bottom:52px}.du{margin-bottom:48px}.ek{font-size:14px}.el{line-height:20px}.es{font-size:13px}.et{padding:5px 12px}.fp{display:flex}.go{margin-bottom:50px}.gs{max-width:680px}.ic{font-size:42px}.id{margin-top:1.19em}.ie{margin-bottom:32px}.if{line-height:52px}.ig{letter-spacing:-0.011em}.is{align-items:center}.it{flex-direction:row}.jt{border-top:solid 1px #F2F2F2}.ju{border-bottom:solid 1px #F2F2F2}.jv{margin:32px 0 0}.jw{padding:3px 8px}.kh> *{margin-right:24px}.ki> :last-child{margin-right:0}.lz{margin:0}.nj{font-size:20px}.nk{margin-top:2.14em}.nl{line-height:32px}.nm{letter-spacing:-0.003em}.od{margin-top:1.14em}.ol{margin-top:56px}.qo{margin-bottom:0}.qp{margin-right:20px}.rd{max-width:500px}.rr{line-height:24px}.rs{letter-spacing:0}.sb{margin-bottom:88px}.sn{font-size:24px}.so{line-height:30px}.sp{letter-spacing:-0.016em}.tb{margin:40px 0 16px}.tn{width:min-width}.ts{padding-top:72px}</style><style type="text/css" data-fela-rehydration="544" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.k{display:none}.x{display:flex}.y{justify-content:space-between}.bu{width:64px}.cg{min-width:100%}.cl{margin:0 48px}.da{height:48px}.dh{margin-bottom:52px}.dt{margin-bottom:48px}.ei{font-size:13px}.ej{line-height:20px}.er{padding:0px 8px 1px}.gn{margin-bottom:50px}.gr{max-width:680px}.hx{font-size:42px}.hy{margin-top:1.19em}.hz{margin-bottom:32px}.ia{line-height:52px}.ib{letter-spacing:-0.011em}.iq{align-items:center}.ir{flex-direction:row}.jp{border-top:solid 1px #F2F2F2}.jq{border-bottom:solid 1px #F2F2F2}.jr{margin:32px 0 0}.js{padding:3px 8px}.kf> *{margin-right:24px}.kg> :last-child{margin-right:0}.ly{margin:0}.nf{font-size:20px}.ng{margin-top:2.14em}.nh{line-height:32px}.ni{letter-spacing:-0.003em}.oc{margin-top:1.14em}.ok{margin-top:56px}.qq{margin-bottom:0}.qr{margin-right:20px}.re{max-width:500px}.rp{line-height:24px}.rq{letter-spacing:0}.sa{margin-bottom:88px}.sk{font-size:24px}.sl{line-height:30px}.sm{letter-spacing:-0.016em}.ta{margin:40px 0 16px}.tm{width:min-width}.tr{padding-top:72px}</style><style type="text/css" data-fela-rehydration="544" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.l{display:none}.v{display:flex}.w{justify-content:space-between}.bt{width:24px}.cf{min-width:100%}.ck{margin:0 24px}.cz{height:40px}.dg{margin-bottom:44px}.ds{margin-bottom:32px}.eg{font-size:13px}.eh{line-height:20px}.eq{padding:0px 8px 1px}.gm{margin-bottom:2px}.hs{font-size:32px}.ht{margin-top:1.01em}.hu{margin-bottom:24px}.hv{line-height:38px}.hw{letter-spacing:-0.014em}.io{align-items:flex-start}.ip{flex-direction:column-reverse}.jn{margin:24px 0 0}.jo{padding:0}.kd> *{margin-right:8px}.ke> :last-child{margin-right:8px}.kv{margin-left:0px}.lx{margin:0}.mn{border:1px solid #F2F2F2}.mo{border-radius:99em}.mp{padding:0px 16px 0px 12px}.mq{height:38px}.mr{align-items:center}.mt svg{margin-right:8px}.nb{font-size:18px}.nc{margin-top:1.56em}.nd{line-height:28px}.ne{letter-spacing:-0.003em}.ob{margin-top:1.34em}.oj{margin-top:40px}.qk{flex-direction:column}.qs{margin-bottom:20px}.qt{margin-right:0}.rf{max-width:100%}.rm{font-size:24px}.rn{line-height:30px}.ro{letter-spacing:-0.016em}.rz{margin-bottom:64px}.sh{font-size:20px}.si{line-height:24px}.sj{letter-spacing:0}.sz{margin:32px 0 16px}.tl{width:100%}.tq{padding-top:48px}.ms:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="544" data-fela-type="RULE" media="print">.qc{display:none}</style><style type="text/css" data-fela-rehydration="544" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.oo{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}</style></head><body><div id="root"><div class="a b c"><a href="/sitemap/sitemap.xml" class="d">Sitemap</a><div class="e f g h i j k l"></div><script>document.domain = document.domain;</script><div class="m c"><div class="m n o p c"><div class="q r s t u v w x y j e z ab"><a class="eb ai ec bg am b ao ap aq ar as at au av t v x j e r ed ab" href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F37bce4205016&amp;%7Efeature=LoOpenInAppButton&amp;%7Echannel=ShowPostUnderUser&amp;%7Estage=mobileNavBar&amp;source=post_page---top_nav_layout_nav-----------------------------------------" rel="noopener follow">Open in app<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10" class="ea"><path fill="currentColor" d="M.985 8.485a.375.375 0 1 0 .53.53zM8.75 1.25h.375A.375.375 0 0 0 8.75.875zM8.375 6.5a.375.375 0 1 0 .75 0zM3.5.875a.375.375 0 1 0 0 .75zm-1.985 8.14 7.5-7.5-.53-.53-7.5 7.5zm6.86-7.765V6.5h.75V1.25zM3.5 1.625h5.25v-.75H3.5z"></path></svg></a><div class="ac r"><p class="bg b ee ef eg eh ei ej ek el em eo eb"><span data-dd-action-name="Susi presentation tracker global_nav"><button class="bg b ee ef ep eg eh eq ei ej er es el et eu eo ev ew ex ey ez fa fb fc fd fe ff fg fh fi fj fk bn fl fm" data-testid="headerSignUpButton">Sign up</button></span></p><div class="fn m"><p class="bg b ee ef eg eh ei ej ek el em eo eb"><span data-dd-action-name="Susi presentation tracker global_nav"><a class="ah ai aj fo al am an ao ap aq ar as at au av" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Famrelsher07.medium.com%2Fwhen-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016&amp;source=post_page---top_nav_layout_nav-----------------------global_nav------------------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="q r s ac ae af"><div class="ac r ag"><a class="ah ai aj ak al am an ao ap aq ar as at au av ac" aria-label="Homepage" data-testid="headerMediumLogo" href="https://medium.com/?source=post_page---top_nav_layout_nav-----------------------------------------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="719" height="160" fill="none" aria-labelledby="wordmark-medium-desc" viewBox="0 0 719 160" class="aw ax ay"><desc id="wordmark-medium-desc">Medium Logo</desc><path fill="#242424" d="m174.104 9.734.215-.047V8.02H130.39L89.6 103.89 48.81 8.021H1.472v1.666l.212.047c8.018 1.81 12.09 4.509 12.09 14.242V137.93c0 9.734-4.087 12.433-12.106 14.243l-.212.047v1.671h32.118v-1.665l-.213-.048c-8.018-1.809-12.089-4.509-12.089-14.242V30.586l52.399 123.305h2.972l53.925-126.743V140.75c-.687 7.688-4.721 10.062-11.982 11.701l-.215.05v1.652h55.948v-1.652l-.215-.05c-7.269-1.639-11.4-4.013-12.087-11.701l-.037-116.774h.037c0-9.733 4.071-12.432 12.087-14.242m25.555 75.488c.915-20.474 8.268-35.252 20.606-35.507 3.806.063 6.998 1.312 9.479 3.714 5.272 5.118 7.751 15.812 7.368 31.793zm-.553 5.77h65.573v-.275c-.186-15.656-4.721-27.834-13.466-36.196-7.559-7.227-18.751-11.203-30.507-11.203h-.263c-6.101 0-13.584 1.48-18.909 4.16-6.061 2.807-11.407 7.003-15.855 12.511-7.161 8.874-11.499 20.866-12.554 34.343q-.05.606-.092 1.212a50 50 0 0 0-.065 1.151 85.807 85.807 0 0 0-.094 5.689c.71 30.524 17.198 54.917 46.483 54.917 25.705 0 40.675-18.791 44.407-44.013l-1.886-.664c-6.557 13.556-18.334 21.771-31.738 20.769-18.297-1.369-32.314-19.922-31.042-42.395m139.722 41.359c-2.151 5.101-6.639 7.908-12.653 7.908s-11.513-4.129-15.418-11.63c-4.197-8.053-6.405-19.436-6.405-32.92 0-28.067 8.729-46.22 22.24-46.22 5.657 0 10.111 2.807 12.236 7.704zm43.499 20.008c-8.019-1.897-12.089-4.722-12.089-14.951V1.309l-48.716 14.353v1.757l.299-.024c6.72-.543 11.278.386 13.925 2.83 2.072 1.915 3.082 4.853 3.082 8.987v18.66c-4.803-3.067-10.516-4.56-17.448-4.56-14.059 0-26.909 5.92-36.176 16.672-9.66 11.205-14.767 26.518-14.767 44.278-.003 31.72 15.612 53.039 38.851 53.039 13.595 0 24.533-7.449 29.54-20.013v16.865h43.711v-1.746zM424.1 19.819c0-9.904-7.468-17.374-17.375-17.374-9.859 0-17.573 7.632-17.573 17.374s7.721 17.374 17.573 17.374c9.907 0 17.375-7.47 17.375-17.374m11.499 132.546c-8.019-1.897-12.089-4.722-12.089-14.951h-.035V43.635l-43.714 12.551v1.705l.263.024c9.458.842 12.047 4.1 12.047 15.152v81.086h43.751v-1.746zm112.013 0c-8.018-1.897-12.089-4.722-12.089-14.951V43.635l-41.621 12.137v1.71l.246.026c7.733.813 9.967 4.257 9.967 15.36v59.279c-2.578 5.102-7.415 8.131-13.274 8.336-9.503 0-14.736-6.419-14.736-18.073V43.638l-43.714 12.55v1.703l.262.024c9.459.84 12.05 4.097 12.05 15.152v50.17a56.3 56.3 0 0 0 .91 10.444l.787 3.423c3.701 13.262 13.398 20.197 28.59 20.197 12.868 0 24.147-7.966 29.115-20.43v17.311h43.714v-1.747zm169.818 1.788v-1.749l-.213-.05c-8.7-2.006-12.089-5.789-12.089-13.49v-63.79c0-19.89-11.171-31.761-29.883-31.761-13.64 0-25.141 7.882-29.569 20.16-3.517-13.01-13.639-20.16-28.606-20.16-13.146 0-23.449 6.938-27.869 18.657V43.643L545.487 55.68v1.715l.263.024c9.345.829 12.047 4.181 12.047 14.95v81.784h40.787v-1.746l-.215-.053c-6.941-1.631-9.181-4.606-9.181-12.239V66.998c1.836-4.289 5.537-9.37 12.853-9.37 9.086 0 13.692 6.296 13.692 18.697v77.828h40.797v-1.746l-.215-.053c-6.94-1.631-9.18-4.606-9.18-12.239V75.066a42 42 0 0 0-.578-7.26c1.947-4.661 5.86-10.177 13.475-10.177 9.214 0 13.691 6.114 13.691 18.696v77.828z"></path></svg></a><div class="az i"><div class="ac ak ba bb bc r bd be"><div class="bn" aria-describedby="searchResults" aria-labelledby="searchResults" aria-haspopup="listbox" role="listbox"></div><div class="bo bp ac"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div><input role="combobox" aria-controls="searchResults" aria-expanded="false" aria-label="search" data-testid="headerSearchInput" tabindex="0" class="ak bf bg bh ab bi bj bk bl bm" placeholder="Search" value=""/></div></div></div><div class="i l x fp fq"><span data-dd-action-name="Susi presentation tracker new_post_topnav"><a class="ah ai aj fo al am an ao ap aq ar as at au av" data-testid="headerWriteButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fnew-story&amp;source=---top_nav_layout_nav-----------------------new_post_topnav------------------" rel="noopener follow"><div class="bg b bh ab eb fr fs ac r ft fu fv"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M14 4a.5.5 0 0 0 0-1zm7 6a.5.5 0 0 0-1 0zm-7-7H4v1h10zM3 4v16h1V4zm1 17h16v-1H4zm17-1V10h-1v10zm-1 1a1 1 0 0 0 1-1h-1zM3 20a1 1 0 0 0 1 1v-1zM4 3a1 1 0 0 0-1 1h1z"></path><path stroke="currentColor" d="m17.5 4.5-8.458 8.458a.25.25 0 0 0-.06.098l-.824 2.47a.25.25 0 0 0 .316.316l2.47-.823a.25.25 0 0 0 .098-.06L19.5 6.5m-2-2 2.323-2.323a.25.25 0 0 1 .354 0l1.646 1.646a.25.25 0 0 1 0 .354L19.5 6.5m-2-2 2 2"></path></svg>Write</div></a></span></div><div class="l k j e"><a class="ah ai aj fo al am an ao ap aq ar as at au av" data-testid="headerSearchButton" href="https://medium.com/search?source=post_page---top_nav_layout_nav-----------------------------------------" rel="noopener follow"><div class="bg b bh ab eb fr fs ac r ft fu fv"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg><span class="fw fx fy ao fz ga gb gc gd speechify-ignore">Search</span></div></a></div><div class="ge i l k"><div class="ac r"><p class="bg b ee ef eg eh ei ej ek el em eo eb"><span data-dd-action-name="Susi presentation tracker global_nav"><button class="bg b ee ef ep eg eh eq ei ej er es el et eu eo ev ew ex ey ez fa fb fc fd fe ff fg fh fi fj fk bn fl fm" data-testid="headerSignUpButton">Sign up</button></span></p><div class="fn m"><p class="bg b ee ef eg eh ei ej ek el em eo eb"><span data-dd-action-name="Susi presentation tracker global_nav"><a class="ah ai aj fo al am an ao ap aq ar as at au av" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Famrelsher07.medium.com%2Fwhen-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016&amp;source=post_page---top_nav_layout_nav-----------------------global_nav------------------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="m"><div><div class="bn" role="tooltip"><div tabindex="-1" class="bf"><button class="ak gf ao ac r aq fr gg gh gi" aria-label="user options menu" data-testid="headerUserIcon"><div class="m fr"><img alt="" class="m fk by bz ca de" src="https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png" width="32" height="32" loading="lazy" role="presentation"/><div class="gj by m bz ca fw o ak gk"></div></div></button></div></div></div></div></div></div><div class="ac"><div class="cb i l k j cc" style="width:0px"></div><div class="cd bi ce cf cg ch" style="width:calc(100% - 0px)"><div class="m"><div class="gl gm gn go gp m"><div class="ac ci"><div class="cp bi gq gr gs gt"></div></div><article><div class="m"><div class="m"><span class="m"></span><section><div><div class="fw gz ha hb hc hd"></div><div class="he hf hg hh hi"><div class="ac ci"><div class="cp bi gq gr gs gt"><div><h1 id="ea15" class="pw-post-title hj hk hl bg hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il bl" data-testid="storyTitle">When should we prefer OwnsMany over HasMany in EF core?</h1><div><div class="speechify-ignore ac cw"><div class="speechify-ignore bi m"><div class="ac im in io ip iq ir is it iu iv iw"><div class="ac r iw"><div class="ac ix"><div><div class="bn" role="tooltip"><div tabindex="-1" class="bf"><a rel="noopener follow" href="/?source=post_page---byline--37bce4205016---------------------------------------" data-discover="true"><div class="m iy iz by ja jb"><div class="m fr"><img alt="Amr elshaer" class="m fk by bz ca de" src="https://miro.medium.com/v2/resize:fill:64:64/1*ygu3xtVlw7D7cKsKwM1jWQ.jpeg" width="32" height="32" loading="lazy" data-testid="authorPhoto"/><div class="jc by m bz ca fw o jd gk"></div></div></div></a></div></div></div></div><span class="bg b bh ab bl"><div class="je ac r"><div class="ac r jf"><div class="ac r"><div><div class="bn" role="tooltip"><div tabindex="-1" class="bf"><span class="bg b bh ab bl"><a class="ah ai aj fo al am an ao ap aq ar as at jg" data-testid="authorName" rel="noopener follow" href="/?source=post_page---byline--37bce4205016---------------------------------------" data-discover="true">Amr elshaer</a></span></div></div></div></div><div class="jh bn"></div></div></div></span></div><div class="ac r ji"><span class="bg b bh ab eb"><div class="ac ag"><span data-testid="storyReadTime">6 min read</span><div class="jj jk m" aria-hidden="true"><span class="m" aria-hidden="true"><span class="bg b bh ab eb">·</span></span></div><span data-testid="storyPublishDate">Sep 16, 2023</span></div></span></div></div><div class="ac cw jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka"><div class="i l x fp fq r"><div class="kq m"><div class="ac r kr ks"><div class="pw-multi-vote-icon fr kt ku kv kw"><span data-dd-action-name="Susi presentation tracker clap_footer"><a class="ah ai aj fo al am an ao ap aq ar as at au av" data-testid="headerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F37bce4205016&amp;operation=register&amp;redirect=https%3A%2F%2Famrelsher07.medium.com%2Fwhen-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016&amp;user=Amr+elshaer&amp;userId=a45bdd28e1bf&amp;source=---header_actions--37bce4205016---------------------clap_footer------------------" rel="noopener follow"><div><div class="bn" role="tooltip"><div tabindex="-1" class="bf"><div class="kx aq ky kz la lb ao lc ld le kw" role="presentation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></div></a></span></div><div class="pw-multi-vote-count m lf lg lh li lj lk ll"><p class="bg b ec ab eb"><span class="lm">--</span></p></div></div></div><div><div class="bn" role="tooltip"><div tabindex="-1" class="bf"><button class="aq kx lp lq ac r fs lr ls" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="lo"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg><p class="bg b ec ab eb"><span class="pw-responses-count ln lo">1</span></p></button></div></div></div></div><div class="ac r kb kc kd ke kf kg kh ki kj kk kl km kn ko kp"><div class="lt l k j e"></div><div class="i l"><div><div class="bn" role="tooltip"><div tabindex="-1" class="bf"><span data-dd-action-name="Susi presentation tracker bookmark_footer"><a class="ah ai aj fo al am an ao ap aq ar as at au av" data-testid="headerBookmarkButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F37bce4205016&amp;operation=register&amp;redirect=https%3A%2F%2Famrelsher07.medium.com%2Fwhen-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016&amp;source=---header_actions--37bce4205016---------------------bookmark_footer------------------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="eb lu" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div></div><div class="fk lv cu"><div class="m ag"><div class="ac ci"><div class="lw lx ly lz ma mb cp bi"><div class="ac"><div class="bn" role="tooltip"><div><div class="bn" role="tooltip"><div tabindex="-1" class="bf"><button aria-label="Listen" data-testid="audioPlayButton" class="ah fs aj fo al am an mc ap aq ar fe md me ls mf mg mh mi mj t mk ml mm mn mo mp mq v mr ms mt"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"></path></svg><div class="k j e"><p class="bg b bh ab eb">Listen</p></div></button></div></div></div></div></div></div></div></div></div><div class="bn" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bn" role="tooltip"><div tabindex="-1" class="bf"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="ah fs aj fo al am an mc ap aq ar fe md me ls mf mg mh mi mj t mk ml mm mn mo mp mq v mr ms mt"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg><div class="k j e"><p class="bg b bh ab eb">Share</p></div></button></div></div></div></div></div></div></div></div></div></div><p id="e760" class="pw-post-body-paragraph mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr he bl">In Entity Framework Core (EF Core), <code class="de ns nt nu nv b">OwnsMany</code> and <code class="de ns nt nu nv b">HasMany</code> are two different methods used to define relationships between entities. They are used in different scenarios and have distinct implications:</p><ol class=""><li id="5416" class="mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr nw nx ny bl"><code class="de ns nt nu nv b">HasMany</code>:</li></ol><ul class=""><li id="93b5" class="mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr nz nx ny bl"><code class="de ns nt nu nv b">HasMany</code> is used to define a one-to-many or many-to-many relationship between two entities.</li><li id="3b07" class="mu mv hl mw b mx oa mz na nb ob nd ne nf oc nh ni nj od nl nm nn oe np nq nr nz nx ny bl">It is typically used when you have a reference from one entity to another through a navigation property, and you want to specify that there can be multiple related entities on the “many” side of the relationship.</li><li id="523e" class="mu mv hl mw b mx oa mz na nb ob nd ne nf oc nh ni nj od nl nm nn oe np nq nr nz nx ny bl">For example, if you have a <code class="de ns nt nu nv b">Customer</code> entity with a navigation property <code class="de ns nt nu nv b">Orders</code>, you would use <code class="de ns nt nu nv b">HasMany</code> to specify that a customer can have multiple orders.</li><li id="869f" class="mu mv hl mw b mx oa mz na nb ob nd ne nf oc nh ni nj od nl nm nn oe np nq nr nz nx ny bl"><code class="de ns nt nu nv b">HasMany</code> is suitable for situations where the related entities have their own <strong class="mw hm">independent existence and can be queried, updated, or deleted independently of the owner entity</strong>.</li><li id="8e27" class="mu mv hl mw b mx oa mz na nb ob nd ne nf oc nh ni nj od nl nm nn oe np nq nr nz nx ny bl">example:</li></ul><figure class="oi oj ok ol om on of og paragraph-image"><div role="button" tabindex="0" class="oo op fr oq bi or"><span class="fw fx fy ao fz ga gb gc gd speechify-ignore">Press enter or click to view image in full size</span><div class="of og oh"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*XsUZc4RjlIiy8TBHp858PA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*XsUZc4RjlIiy8TBHp858PA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*XsUZc4RjlIiy8TBHp858PA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*XsUZc4RjlIiy8TBHp858PA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*XsUZc4RjlIiy8TBHp858PA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*XsUZc4RjlIiy8TBHp858PA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XsUZc4RjlIiy8TBHp858PA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*XsUZc4RjlIiy8TBHp858PA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*XsUZc4RjlIiy8TBHp858PA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*XsUZc4RjlIiy8TBHp858PA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*XsUZc4RjlIiy8TBHp858PA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*XsUZc4RjlIiy8TBHp858PA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*XsUZc4RjlIiy8TBHp858PA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*XsUZc4RjlIiy8TBHp858PA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bi mb os c" width="700" height="765" loading="eager" role="presentation"/></picture></div></div><figcaption class="ot fm ou of og ov ow bg b bh ab eb">HasMany</figcaption></figure></div></div></div><div class="ac ci ox oy oz pa" role="separator"><span class="pb by bn pc pd pe"></span><span class="pb by bn pc pd pe"></span><span class="pb by bn pc pd"></span></div><div class="he hf hg hh hi"><div class="ac ci"><div class="cp bi gq gr gs gt"><p id="84fc" class="pw-post-body-paragraph mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr he bl"><code class="de ns nt nu nv b">OwnsMany</code>:</p><ul class=""><li id="f0e3" class="mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr nz nx ny bl"><code class="de ns nt nu nv b">OwnsMany</code> is used to define a relationship where one entity &quot;owns&quot; a collection of related entities. The owned entities do not have their own identity in the database, they are treated as part of the owner entity.</li><li id="6902" class="mu mv hl mw b mx oa mz na nb ob nd ne nf oc nh ni nj od nl nm nn oe np nq nr nz nx ny bl">It is used for modeling complex types or value objects that are logically part of the owning entity and should not have their own separate table with a primary key.</li><li id="ada7" class="mu mv hl mw b mx oa mz na nb ob nd ne nf oc nh ni nj od nl nm nn oe np nq nr nz nx ny bl"><code class="de ns nt nu nv b">OwnsMany</code> is suitable when the related<strong class="mw hm"> entities don&#x27;t have an independent identity and are conceptually owned by the parent entity. Changes to the owner entity are automatically reflected in the owned entities.</strong></li></ul><p id="1e59" class="pw-post-body-paragraph mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr he bl">example:</p><figure class="oi oj ok ol om on of og paragraph-image"><div role="button" tabindex="0" class="oo op fr oq bi or"><span class="fw fx fy ao fz ga gb gc gd speechify-ignore">Press enter or click to view image in full size</span><div class="of og pf"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*8TribNaP2BO6M473Xw4g0Q.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*8TribNaP2BO6M473Xw4g0Q.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*8TribNaP2BO6M473Xw4g0Q.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*8TribNaP2BO6M473Xw4g0Q.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*8TribNaP2BO6M473Xw4g0Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*8TribNaP2BO6M473Xw4g0Q.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8TribNaP2BO6M473Xw4g0Q.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*8TribNaP2BO6M473Xw4g0Q.png 640w, https://miro.medium.com/v2/resize:fit:720/1*8TribNaP2BO6M473Xw4g0Q.png 720w, https://miro.medium.com/v2/resize:fit:750/1*8TribNaP2BO6M473Xw4g0Q.png 750w, https://miro.medium.com/v2/resize:fit:786/1*8TribNaP2BO6M473Xw4g0Q.png 786w, https://miro.medium.com/v2/resize:fit:828/1*8TribNaP2BO6M473Xw4g0Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*8TribNaP2BO6M473Xw4g0Q.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*8TribNaP2BO6M473Xw4g0Q.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bi mb os c" width="700" height="656" loading="lazy" role="presentation"/></picture></div></div><figcaption class="ot fm ou of og ov ow bg b bh ab eb">OwnsMany</figcaption></figure><p id="5dfc" class="pw-post-body-paragraph mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr he bl">In this example, the <code class="de ns nt nu nv b">LineItems(owned)</code> are owned by the <code class="de ns nt nu nv b">Order(Owner)</code>, and they are stored as part of the <code class="de ns nt nu nv b">Order</code> record in the database without their own primary key, you can’t do any operation on LineItems without his owner Order.</p></div></div></div><div class="ac ci ox oy oz pa" role="separator"><span class="pb by bn pc pd pe"></span><span class="pb by bn pc pd pe"></span><span class="pb by bn pc pd"></span></div><div class="he hf hg hh hi"><div class="ac ci"><div class="cp bi gq gr gs gt"><p id="5d1c" class="pw-post-body-paragraph mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr he bl">The choice between using <code class="de ns nt nu nv b">HasMany</code> and <code class="de ns nt nu nv b">OwnsMany</code> depends on the nature of the relationship between the entities and whether the related entities should have their own identity in the database. In the case of the relationship between <code class="de ns nt nu nv b">Order</code> and <code class="de ns nt nu nv b">Customer</code>, it&#x27;s more appropriate to use <code class="de ns nt nu nv b">HasMany</code> because:</p><ol class=""><li id="8b75" class="mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr nw nx ny bl">Independence of Identity: Each order placed by a customer is a distinct entity with its own identity. Orders typically have attributes like order date, order number, and possibly more. These attributes make each order unique and distinguishable from other orders. Therefore, orders should have their own identity in the database.</li><li id="0857" class="mu mv hl mw b mx oa mz na nb ob nd ne nf oc nh ni nj od nl nm nn oe np nq nr nw nx ny bl">Querying and Referential Integrity: Using <code class="de ns nt nu nv b">HasMany</code> allows you to query orders independently of customers. You can retrieve all orders, filter them by various criteria, and perform operations on them without directly affecting the customer entity. Additionally, this approach allows for referential integrity constraints to be enforced, ensuring that orders are associated with valid customers.</li></ol><p id="9044" class="pw-post-body-paragraph mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr he bl">On the other hand, <code class="de ns nt nu nv b">OwnsMany</code> is typically used when the related entities are conceptually part of the owner entity and do not have their own independent identity in the database. In the case of <code class="de ns nt nu nv b">Order</code> and <code class="de ns nt nu nv b">LineItem</code>, <code class="de ns nt nu nv b">OwnsMany</code> is appropriate because line items are part of the order and don&#x27;t exist independently. They are typically embedded within the order&#x27;s structure and don&#x27;t have attributes that would warrant their own separate table.</p></div></div></div><div class="ac ci ox oy oz pa" role="separator"><span class="pb by bn pc pd pe"></span><span class="pb by bn pc pd pe"></span><span class="pb by bn pc pd"></span></div><div class="he hf hg hh hi"><div class="ac ci"><div class="cp bi gq gr gs gt"><p id="c170" class="pw-post-body-paragraph mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr he bl">To configure a collection of <strong class="mw hm">owned types</strong> use <code class="de ns nt nu nv b">OwnsMany</code> in <code class="de ns nt nu nv b">OnModelCreating</code>.</p><p id="ff54" class="pw-post-body-paragraph mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr he bl">Owned types need a <strong class="mw hm">primary key</strong>. If there are no good candidates properties on the .NET type, EF Core can try to create one. However, when owned types are defined through a collection, it isn’t enough to just create a <a class="ah pg" href="https://www.entityframeworktutorial.net/efcore/shadow-property.aspx" rel="noopener ugc nofollow" target="_blank"><strong class="mw hm">shadow property</strong></a> to act as both the foreign key into the owner and the primary key of the owned instance, as we do for <code class="de ns nt nu nv b">OwnsOne</code>: there can be multiple owned type instances for each owner, and hence the key of the owner isn&#x27;t enough to provide a unique identity for each owned instance.</p><p id="3677" class="pw-post-body-paragraph mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr he bl">The two most straightforward solutions to this are:</p><ul class=""><li id="4f72" class="mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr nz nx ny bl"><strong class="mw hm"><em class="ph">(Uniqueness in the table scope) </em></strong>Defining a <strong class="mw hm">surrogate primary key</strong> on a new property independent of the foreign key that points to the owner. The contained values would need to be unique across all owners (e.g. if Parent {1} has Child {1}, then Parent {2} cannot have Child {1}), so the value doesn’t have any inherent meaning. Since the foreign key is not part of the primary key its values can be changed, so you could move a child from one parent to another one, however this usually goes against aggregate semantics.</li></ul><p id="5ec2" class="pw-post-body-paragraph mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr he bl">A <strong class="mw hm">surrogate key</strong> is an artificial or synthetic key used in a database table to uniquely identify each row of data. Unlike natural keys, which are based on existing attributes or columns in the table (e.g., a person’s Social Security Number or a product’s SKU), surrogate keys are typically system-generated and have no inherent meaning or relation to the data they identify. They are solely used for the purpose of ensuring uniqueness and facilitating efficient database operations.</p><p id="09d1" class="pw-post-body-paragraph mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr he bl">Key characteristics of surrogate keys include:</p><ol class=""><li id="a0c8" class="mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr nw nx ny bl">Uniqueness: Surrogate keys must be unique within the table. They ensure that no two rows in the table have the same surrogate key value.</li><li id="88ca" class="mu mv hl mw b mx oa mz na nb ob nd ne nf oc nh ni nj od nl nm nn oe np nq nr nw nx ny bl">Stability: Surrogate keys typically do not change over time. They provide a stable means of identifying a row even if other attributes or data values change.</li><li id="5ae4" class="mu mv hl mw b mx oa mz na nb ob nd ne nf oc nh ni nj od nl nm nn oe np nq nr nw nx ny bl">Independence: Surrogate keys are independent of the natural attributes of the data. They are not derived from any inherent characteristics of the entity being modeled.</li><li id="242e" class="mu mv hl mw b mx oa mz na nb ob nd ne nf oc nh ni nj od nl nm nn oe np nq nr nw nx ny bl">Simplicity: Surrogate keys are often simple and efficient for indexing, querying, and joining tables. They are often integers or numeric values.</li></ol><blockquote class="pi pj pk"><p id="c54d" class="mu mv ph mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr he bl">Surrogate key is a system-generated identifier used to uniquely identify rows in a database table. It serves as a stable and independent means of ensuring uniqueness, simplifying data management, and improving database performance.</p></blockquote><figure class="oi oj ok ol om on of og paragraph-image"><div role="button" tabindex="0" class="oo op fr oq bi or"><span class="fw fx fy ao fz ga gb gc gd speechify-ignore">Press enter or click to view image in full size</span><div class="of og pl"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*00T0FIwb8LISp7jqK9MH3w.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*00T0FIwb8LISp7jqK9MH3w.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*00T0FIwb8LISp7jqK9MH3w.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*00T0FIwb8LISp7jqK9MH3w.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*00T0FIwb8LISp7jqK9MH3w.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*00T0FIwb8LISp7jqK9MH3w.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*00T0FIwb8LISp7jqK9MH3w.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*00T0FIwb8LISp7jqK9MH3w.png 640w, https://miro.medium.com/v2/resize:fit:720/1*00T0FIwb8LISp7jqK9MH3w.png 720w, https://miro.medium.com/v2/resize:fit:750/1*00T0FIwb8LISp7jqK9MH3w.png 750w, https://miro.medium.com/v2/resize:fit:786/1*00T0FIwb8LISp7jqK9MH3w.png 786w, https://miro.medium.com/v2/resize:fit:828/1*00T0FIwb8LISp7jqK9MH3w.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*00T0FIwb8LISp7jqK9MH3w.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*00T0FIwb8LISp7jqK9MH3w.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bi mb os c" width="700" height="590" loading="lazy" role="presentation"/></picture></div></div><figcaption class="ot fm ou of og ov ow bg b bh ab eb">uniqueness in table scope</figcaption></figure><figure class="oi oj ok ol om on of og paragraph-image"><div role="button" tabindex="0" class="oo op fr oq bi or"><span class="fw fx fy ao fz ga gb gc gd speechify-ignore">Press enter or click to view image in full size</span><div class="of og pm"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*myh4uYvPobyxih01IW12Gg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*myh4uYvPobyxih01IW12Gg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*myh4uYvPobyxih01IW12Gg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*myh4uYvPobyxih01IW12Gg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*myh4uYvPobyxih01IW12Gg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*myh4uYvPobyxih01IW12Gg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*myh4uYvPobyxih01IW12Gg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*myh4uYvPobyxih01IW12Gg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*myh4uYvPobyxih01IW12Gg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*myh4uYvPobyxih01IW12Gg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*myh4uYvPobyxih01IW12Gg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*myh4uYvPobyxih01IW12Gg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*myh4uYvPobyxih01IW12Gg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*myh4uYvPobyxih01IW12Gg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bi mb os c" width="700" height="871" loading="lazy" role="presentation"/></picture></div></div><figcaption class="ot fm ou of og ov ow bg b bh ab eb">migration using a surrogate key</figcaption></figure><ul class=""><li id="17a7" class="mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr nz nx ny bl"><strong class="mw hm"><em class="ph">(Uninquess in the parent(owner) scope)</em></strong>Using the foreign key and an additional property as a composite key. The additional property value now only needs to be unique for a given parent (so if Parent {1} has Child {1,1} then Parent {2} can still have Child {2,1}). By making the foreign key part of the primary key the relationship between the owner and the owned entity becomes immutable and reflects aggregate semantics better. <strong class="mw hm">This is what EF Core does by default</strong>.</li></ul><figure class="oi oj ok ol om on of og paragraph-image"><div role="button" tabindex="0" class="oo op fr oq bi or"><span class="fw fx fy ao fz ga gb gc gd speechify-ignore">Press enter or click to view image in full size</span><div class="of og pl"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*9YpaZTxAnGtYeNwfPMsLUw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*9YpaZTxAnGtYeNwfPMsLUw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*9YpaZTxAnGtYeNwfPMsLUw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*9YpaZTxAnGtYeNwfPMsLUw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*9YpaZTxAnGtYeNwfPMsLUw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*9YpaZTxAnGtYeNwfPMsLUw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9YpaZTxAnGtYeNwfPMsLUw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*9YpaZTxAnGtYeNwfPMsLUw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*9YpaZTxAnGtYeNwfPMsLUw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*9YpaZTxAnGtYeNwfPMsLUw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*9YpaZTxAnGtYeNwfPMsLUw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*9YpaZTxAnGtYeNwfPMsLUw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*9YpaZTxAnGtYeNwfPMsLUw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*9YpaZTxAnGtYeNwfPMsLUw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bi mb os c" width="700" height="468" loading="lazy" role="presentation"/></picture></div></div><figcaption class="ot fm ou of og ov ow bg b bh ab eb">Uniqueness in the parent scope</figcaption></figure><figure class="oi oj ok ol om on of og paragraph-image"><div role="button" tabindex="0" class="oo op fr oq bi or"><span class="fw fx fy ao fz ga gb gc gd speechify-ignore">Press enter or click to view image in full size</span><div class="of og pm"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*rA2zlnMxtHPYpF-dfRIJLA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*rA2zlnMxtHPYpF-dfRIJLA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*rA2zlnMxtHPYpF-dfRIJLA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*rA2zlnMxtHPYpF-dfRIJLA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*rA2zlnMxtHPYpF-dfRIJLA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*rA2zlnMxtHPYpF-dfRIJLA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rA2zlnMxtHPYpF-dfRIJLA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*rA2zlnMxtHPYpF-dfRIJLA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*rA2zlnMxtHPYpF-dfRIJLA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*rA2zlnMxtHPYpF-dfRIJLA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*rA2zlnMxtHPYpF-dfRIJLA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*rA2zlnMxtHPYpF-dfRIJLA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*rA2zlnMxtHPYpF-dfRIJLA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*rA2zlnMxtHPYpF-dfRIJLA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bi mb os c" width="700" height="820" loading="lazy" role="presentation"/></picture></div></div><figcaption class="ot fm ou of og ov ow bg b bh ab eb">Migration using compose key default in EF core</figcaption></figure><p id="ec96" class="pw-post-body-paragraph mu mv hl mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr he bl">The choice between these two solutions depends on the specific requirements and semantics of your domain model. Solution 1 with a surrogate key is more flexible in terms of moving children between parents, while Solution 2 with a composite key enforces stronger ownership and reflects the domain’s semantics more closely.</p></div></div></div><div class="ac ci ox oy oz pa" role="separator"><span class="pb by bn pc pd pe"></span><span class="pb by bn pc pd pe"></span><span class="pb by bn pc pd"></span></div><div class="he hf hg hh hi"><div class="ac ci"><div class="cp bi gq gr gs gt"><blockquote class="pi pj pk"><p id="473d" class="mu mv ph mw b mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr he bl">Aggregate is a pattern in Domain-Driven Design. A DDD aggregate is a cluster of domain objects that can be treated as a single unit. An example may be an order and its line-items, these will be separate objects, but it’s useful to treat the order (together with its line items) as a single aggregate. <a class="ah pg" href="https://martinfowler.com/" rel="noopener ugc nofollow" target="_blank">Martin Fowler</a></p></blockquote></div></div></div></div></section></div></div></article></div><div class="ac ci"><div class="cp bi gq gr gs gt"><div class="pn po ac ji"><div class="pp ac"><a class="pq ak ao aq" href="https://medium.com/tag/entity-framework-core?source=post_page-----37bce4205016---------------------------------------" rel="noopener follow"><div class="pr fr de ps gv pt pu bg b bh ab bl gc">Entity Framework Core</div></a></div><div class="pp ac"><a class="pq ak ao aq" href="https://medium.com/tag/csharp?source=post_page-----37bce4205016---------------------------------------" rel="noopener follow"><div class="pr fr de ps gv pt pu bg b bh ab bl gc">Csharp</div></a></div><div class="pp ac"><a class="pq ak ao aq" href="https://medium.com/tag/dotnet?source=post_page-----37bce4205016---------------------------------------" rel="noopener follow"><div class="pr fr de ps gv pt pu bg b bh ab bl gc">Dotnet</div></a></div><div class="pp ac"><a class="pq ak ao aq" href="https://medium.com/tag/domain-driven-design?source=post_page-----37bce4205016---------------------------------------" rel="noopener follow"><div class="pr fr de ps gv pt pu bg b bh ab bl gc">Domain Driven Design</div></a></div><div class="pp ac"><a class="pq ak ao aq" href="https://medium.com/tag/refactoring?source=post_page-----37bce4205016---------------------------------------" rel="noopener follow"><div class="pr fr de ps gv pt pu bg b bh ab bl gc">Refactoring</div></a></div></div></div></div><div class="m"></div><footer class="pv pw px py pz ac r qa qb c"><div class="m ag"><div class="ac ci"><div class="cp bi gq gr gs gt"><div class="ac cw qc"><div class="ac r kr"><div class="qd m"><span class="m qe qf qg f e"><div class="ac r kr ks"><div class="pw-multi-vote-icon fr kt ku kv kw"><span data-dd-action-name="Susi presentation tracker clap_footer"><a class="ah ai aj fo al am an ao ap aq ar as at au av" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F37bce4205016&amp;operation=register&amp;redirect=https%3A%2F%2Famrelsher07.medium.com%2Fwhen-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016&amp;user=Amr+elshaer&amp;userId=a45bdd28e1bf&amp;source=---footer_actions--37bce4205016---------------------clap_footer------------------" rel="noopener follow"><div><div class="bn" role="tooltip"><div tabindex="-1" class="bf"><div class="kx aq ky kz la lb ao lc ld le kw" role="presentation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></div></a></span></div><div class="pw-multi-vote-count m lf lg lh li lj lk ll"><p class="bg b ec ab eb"><span class="lm">--</span></p></div></div></span><span class="m i h g qh qi"><div class="ac r kr ks"><div class="pw-multi-vote-icon fr kt ku kv kw"><span data-dd-action-name="Susi presentation tracker clap_footer"><a class="ah ai aj fo al am an ao ap aq ar as at au av" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F37bce4205016&amp;operation=register&amp;redirect=https%3A%2F%2Famrelsher07.medium.com%2Fwhen-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016&amp;user=Amr+elshaer&amp;userId=a45bdd28e1bf&amp;source=---footer_actions--37bce4205016---------------------clap_footer------------------" rel="noopener follow"><div><div class="bn" role="tooltip"><div tabindex="-1" class="bf"><div class="kx aq ky kz la lb ao lc ld le kw" role="presentation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></div></a></span></div><div class="pw-multi-vote-count m lf lg lh li lj lk ll"><p class="bg b ec ab eb"><span class="lm">--</span></p></div></div></span></div><div class="az ac"><div><div class="bn" role="tooltip"><div tabindex="-1" class="bf"><button class="aq kx lp lq ac r fs lr ls" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="lo"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg><p class="bg b bh ab eb"><span class="pw-responses-count ln lo">1</span></p></button></div></div></div></div></div><div class="ac r"><div class="pe m cb"><div><div class="bn" role="tooltip"><div tabindex="-1" class="bf"><span data-dd-action-name="Susi presentation tracker bookmark_footer"><a class="ah ai aj fo al am an ao ap aq ar as at au av" data-testid="footerBookmarkButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F37bce4205016&amp;operation=register&amp;redirect=https%3A%2F%2Famrelsher07.medium.com%2Fwhen-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016&amp;source=---footer_actions--37bce4205016---------------------bookmark_footer------------------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="eb lu" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div></div><div class="pe m cb"><div class="bn" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bn" role="tooltip"><div tabindex="-1" class="bf"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="footerSocialShareButton" class="ah fs aj fo al am an mc ap aq ar fe md me ls mf"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></div></div></footer><div class="qj m"><div class="ac ci"><div class="cp bi gq gr gs gt"><div class="ac iv it ir qk ql"><div class="qm qn qo qp qq qr qs qt qu qv ac cw"><div class="i l"><a tabindex="0" rel="noopener follow" href="/?source=post_page---post_author_info--37bce4205016---------------------------------------" data-discover="true"><div class="m fr"><img alt="Amr elshaer" class="m fk by qw qx de" src="https://miro.medium.com/v2/resize:fill:96:96/1*ygu3xtVlw7D7cKsKwM1jWQ.jpeg" width="48" height="48" loading="lazy"/><div class="gj by m qw qx fw o ak qy"></div></div></a></div><div class="k j e"><a tabindex="0" rel="noopener follow" href="/?source=post_page---post_author_info--37bce4205016---------------------------------------" data-discover="true"><div class="m fr"><img alt="Amr elshaer" class="m fk by qz ra de" src="https://miro.medium.com/v2/resize:fill:128:128/1*ygu3xtVlw7D7cKsKwM1jWQ.jpeg" width="64" height="64" loading="lazy"/><div class="gj by m qz ra fw o ak qy"></div></div></a></div><div class="k j e rb cb"><div class="ac"></div></div></div><div class="ac cv cd"><div class="rc rd re rf rg m"><a class="ah ai aj al am an ao ap aq ar as at au av ac r" rel="noopener follow" href="/?source=post_page---post_author_info--37bce4205016---------------------------------------" data-discover="true"><h2 class="pw-author-name bg ri rj rk rl rm rn ro nf rp rq nj rr rs nn rt ru bl"><span class="he rh">Written by <!-- -->Amr elshaer</span></h2></a><div class="pp ac ix"><div class="m cb"><span class="pw-follower-count bg b bh ab eb"><a class="ah ai aj fo al am an ao ap aq ar as at jg" rel="noopener follow" href="/followers?source=post_page---post_author_info--37bce4205016---------------------------------------" data-discover="true">653 followers</a></span></div><div class="bg b bh ab eb ac rv"><span class="rw m" aria-hidden="true"><span class="bg b bh ab eb">·</span></span><a class="ah ai aj fo al am an ao ap aq ar as at jg" rel="noopener follow" href="/following?source=post_page---post_author_info--37bce4205016---------------------------------------" data-discover="true">805 following</a></div></div><div class="rx m"><p class="bg b bh ab bl"><span class="he">Software engineer | .Net ,C# ,Angular, Javascript</span></p></div></div></div><div class="i l"><div class="ac"></div></div></div></div></div></div><div class="ry rz sa sb sc m"><div class="sd bi s qj"></div><div class="ac ci"><div class="cp bi gq gr gs gt"><div class="ac r cw"><h2 class="bg ri se sf sg sh si sj sk sl sm sn so sp sq sr ss bl">Responses (<!-- -->1<!-- -->)</h2><div class="ac st"><div><div class="bn" role="tooltip"><div tabindex="-1" class="bf"><a class="su sv" href="https://policy.medium.com/medium-rules-30e5502c4eb4?source=post_page---post_responses--37bce4205016---------------------------------------" rel="noopener follow" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" aria-label="Shield with a checkmark" viewBox="0 0 25 25"><path fill-rule="evenodd" d="M11.987 5.036a.754.754 0 0 1 .914-.01c.972.721 1.767 1.218 2.6 1.543.828.322 1.719.485 2.887.505a.755.755 0 0 1 .741.757c-.018 3.623-.43 6.256-1.449 8.21-1.034 1.984-2.662 3.209-4.966 4.083a.75.75 0 0 1-.537-.003c-2.243-.874-3.858-2.095-4.897-4.074-1.024-1.951-1.457-4.583-1.476-8.216a.755.755 0 0 1 .741-.757c1.195-.02 2.1-.182 2.923-.503.827-.322 1.6-.815 2.519-1.535m.468.903c-.897.69-1.717 1.21-2.623 1.564-.898.35-1.856.527-3.026.565.037 3.45.469 5.817 1.36 7.515.884 1.684 2.25 2.762 4.284 3.571 2.092-.81 3.465-1.89 4.344-3.575.886-1.698 1.299-4.065 1.334-7.512-1.149-.039-2.091-.217-2.99-.567-.906-.353-1.745-.873-2.683-1.561m-.009 9.155a2.672 2.672 0 1 0 0-5.344 2.672 2.672 0 0 0 0 5.344m0 1a3.672 3.672 0 1 0 0-7.344 3.672 3.672 0 0 0 0 7.344m-1.813-3.777.525-.526.916.917 1.623-1.625.526.526-2.149 2.152z" clip-rule="evenodd"></path></svg></a></div></div></div></div></div><div class="sw sx sy sz ta tb tc m"></div><div class="ox m"><button class="bg b bh ab bl pr td te tf lu lr tg fc fd fe th ti tj fh tk tl tm tn to fi fj fk bn fl fm">See all responses</button></div></div></div></div><div class="tp tq tr ts tt m bx"><div class="i l k"><div class="sd bi tu tv"></div><div class="ac ci"><div class="cp bi gq gr gs gt"><div class="tw ac kr ji"><div class="tx ty m"><a class="ah ai aj fo al am an ao ap aq ar as at au av" href="https://help.medium.com/hc/en-us?source=post_page-----37bce4205016---------------------------------------" rel="noopener follow"><p class="bg b ec ab eb">Help</p></a></div><div class="tx ty m"><a class="ah ai aj fo al am an ao ap aq ar as at au av" href="https://status.medium.com/?source=post_page-----37bce4205016---------------------------------------" rel="noopener follow"><p class="bg b ec ab eb">Status</p></a></div><div class="tx ty m"><a class="ah ai aj fo al am an ao ap aq ar as at au av" href="https://medium.com/about?autoplay=1&amp;source=post_page-----37bce4205016---------------------------------------" rel="noopener follow"><p class="bg b ec ab eb">About</p></a></div><div class="tx ty m"><a class="ah ai aj fo al am an ao ap aq ar as at au av" href="https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----37bce4205016---------------------------------------" rel="noopener follow"><p class="bg b ec ab eb">Careers</p></a></div><div class="tx ty m"><a class="ah ai aj fo al am an ao ap aq ar as at au av" href="mailto:pressinquiries@medium.com" rel="noopener follow"><p class="bg b ec ab eb">Press</p></a></div><div class="tx ty m"><a class="ah ai aj fo al am an ao ap aq ar as at au av" href="https://blog.medium.com/?source=post_page-----37bce4205016---------------------------------------" rel="noopener follow"><p class="bg b ec ab eb">Blog</p></a></div><div class="tx ty m"><a class="ah ai aj fo al am an ao ap aq ar as at au av" href="https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----37bce4205016---------------------------------------" rel="noopener follow"><p class="bg b ec ab eb">Privacy</p></a></div><div class="tx ty m"><a class="ah ai aj fo al am an ao ap aq ar as at au av" href="https://policy.medium.com/medium-rules-30e5502c4eb4?source=post_page-----37bce4205016---------------------------------------" rel="noopener follow"><p class="bg b ec ab eb">Rules</p></a></div><div class="tx ty m"><a class="ah ai aj fo al am an ao ap aq ar as at au av" href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----37bce4205016---------------------------------------" rel="noopener follow"><p class="bg b ec ab eb">Terms</p></a></div><div class="tx m"><a class="ah ai aj fo al am an ao ap aq ar as at au av" href="https://speechify.com/medium?source=post_page-----37bce4205016---------------------------------------" rel="noopener follow"><p class="bg b ec ab eb">Text to speech</p></a></div></div></div></div></div></div></div></div></div></div></div></div><script>window.__BUILD_ID__="main-20251110-155029-e7a0736aac"</script><script>window.__GRAPHQL_URI__ = "https://amrelsher07.medium.com/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"algolia":{"queries":{}},"cache":{"experimentGroupSet":true,"reason":"","group":"enabled","tags":["group-edgeCachePosts","post-37bce4205016","user-a45bdd28e1bf"],"serverVariantState":"44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a","middlewareEnabled":true,"cacheStatus":"DYNAMIC","shouldUseCache":true,"vary":[],"pubFeaturingPostPageLabelEnabled":false,"shouldFollowPostQueryEnabled":false},"client":{"hydrated":false,"isUs":false,"isNativeMedium":false,"isSafariMobile":false,"isSafari":false,"isFirefox":false,"routingEntity":{"type":"USER","id":"a45bdd28e1bf","explicit":true},"viewerIsBot":false},"debug":{"requestId":"8c3af08e-6402-4605-8925-e81aca90b353","requestTag":"","hybridDevServices":[],"originalSpanCarrier":{"traceparent":"00-5ffda72c2fdd668ed80fa0e023160c4b-bd380a9896a83c08-01"}},"multiVote":{"clapsPerPost":{}},"navigation":{"hideGoogleOneTap":false,"hasRenderedAlternateUserBanner":null,"currentLocation":"https:\u002F\u002Famrelsher07.medium.com\u002Fwhen-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016","host":"amrelsher07.medium.com","hostname":"amrelsher07.medium.com","referrer":"","hasSetReferrer":false,"susiModal":{"step":null,"operation":"register"},"postRead":false,"partnerProgram":{"selectedCountryCode":null},"staticRouterContext":{"route":{"name":"ShowPostUnderUser"},"statusCode":200},"toastQueue":[],"currentToast":null,"queryString":"","currentHash":""},"config":{"nodeEnv":"production","version":"main-20251110-155029-e7a0736aac","target":"production","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","iosAppId":"828256236","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","recaptcha3Key":"6Lf8R9wUAAAAABMI_85Wb8melS7Zj6ziuf99Yot5","recaptchaEnterpriseKeyId":"6Le-uGgpAAAAAPprRaokM8AKthQ9KNGdoxaGUvVp","datadog":{"applicationId":"6702d87d-a7e0-42fe-bbcb-95b469547ea0","clientToken":"pub853ea8d17ad6821d9f8f11861d23dfed","rumToken":"pubf9cc52896502b9413b68ba36fc0c7162","context":{"deployment":{"target":"production","tag":"main-20251110-155029-e7a0736aac","commit":"e7a0736aacf06a732893d0c8ff8fa55250a055a0"}},"datacenter":"us"},"googleAdsCode":"AW-17106321204","googleAnalyticsCode":"G-7JY7T788PK","googlePay":{"apiVersion":"2","apiVersionMinor":"0","merchantId":"BCR2DN6TV7EMTGBM","merchantName":"Medium","instanceMerchantId":"13685562959212738550"},"applePay":{"version":3},"signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumMastodonDomainName":"me.dm","mediumOwnedAndOperatedCollectionIds":["8a9336e5bb4","b7e45b22fec3","193b68bd4fba","8d6b8a439e32","54c98c43354d","3f6ecf56618","d944778ce714","92d2092dc598","ae2a65f35510","1285ba81cada","544c7006046e","fc8964313712","40187e704f1c","88d9857e584e","7b6769f2748b","bcc38c8f6edf","cef6983b292","cb8577c9149e","444d13b52878","713d7dbc99b0","ef8e90590e66","191186aaafa0","55760f21cdc5","9dc80918cc93","bdc4052bbdba","8ccfed20cbb2"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"],"topicsToFollow":["d61cf867d93f","8a146bc21b28","1eca0103fff3","4d562ee63426","aef1078a3ef5","e15e46793f8d","6158eb913466","55f1c20aba7a","3d18b94f6858","4861fee224fd","63c6f1f93ee","1d98b3a9a871","decb52b64abf","ae5d4995e225","830cded25262"],"topicToTagMappings":{"accessibility":"accessibility","addiction":"addiction","android-development":"android-development","art":"art","artificial-intelligence":"artificial-intelligence","astrology":"astrology","basic-income":"basic-income","beauty":"beauty","biotech":"biotech","blockchain":"blockchain","books":"books","business":"business","cannabis":"cannabis","cities":"cities","climate-change":"climate-change","comics":"comics","coronavirus":"coronavirus","creativity":"creativity","cryptocurrency":"cryptocurrency","culture":"culture","cybersecurity":"cybersecurity","data-science":"data-science","design":"design","digital-life":"digital-life","disability":"disability","economy":"economy","education":"education","equality":"equality","family":"family","feminism":"feminism","fiction":"fiction","film":"film","fitness":"fitness","food":"food","freelancing":"freelancing","future":"future","gadgets":"gadgets","gaming":"gaming","gun-control":"gun-control","health":"health","history":"history","humor":"humor","immigration":"immigration","ios-development":"ios-development","javascript":"javascript","justice":"justice","language":"language","leadership":"leadership","lgbtqia":"lgbtqia","lifestyle":"lifestyle","machine-learning":"machine-learning","makers":"makers","marketing":"marketing","math":"math","media":"media","mental-health":"mental-health","mindfulness":"mindfulness","money":"money","music":"music","neuroscience":"neuroscience","nonfiction":"nonfiction","outdoors":"outdoors","parenting":"parenting","pets":"pets","philosophy":"philosophy","photography":"photography","podcasts":"podcast","poetry":"poetry","politics":"politics","privacy":"privacy","product-management":"product-management","productivity":"productivity","programming":"programming","psychedelics":"psychedelics","psychology":"psychology","race":"race","relationships":"relationships","religion":"religion","remote-work":"remote-work","san-francisco":"san-francisco","science":"science","self":"self","self-driving-cars":"self-driving-cars","sexuality":"sexuality","social-media":"social-media","society":"society","software-engineering":"software-engineering","space":"space","spirituality":"spirituality","sports":"sports","startups":"startup","style":"style","technology":"technology","transportation":"transportation","travel":"travel","true-crime":"true-crime","tv":"tv","ux":"ux","venture-capital":"venture-capital","visual-design":"visual-design","work":"work","world":"world","writing":"writing"},"defaultImages":{"avatar":{"imageId":"1*dmbNkD5D-u45r44go_cf0g.png","height":150,"width":150},"orgLogo":{"imageId":"7*V1_7XP4snlmqrc_0Njontw.png","height":110,"width":500},"postLogo":{"imageId":"167cff2a3d17ac1e64d0762539978f2d54c0058886e8b3c8a03a725a83012ec0","height":630,"width":1200},"postPreviewImage":{"imageId":"bc1f8416df0cad099e43cda2872716e5864f18a73bda2a7547ea082aca9b5632","height":630,"width":1200}},"embeddedPostIds":{"coronavirus":"cd3010f9d81f"},"sharedCdcMessaging":{"COVID_APPLICABLE_TAG_SLUGS":[],"COVID_APPLICABLE_TOPIC_NAMES":[],"COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE":[],"COVID_MESSAGES":{"tierA":{"text":"For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":66,"end":73,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"tierB":{"text":"Anyone can publish on Medium per our Policies, but we don’t fact-check every story. For more info about the coronavirus, see cdc.gov.","markups":[{"start":37,"end":45,"href":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Fcategories\u002F201931128-Policies-Safety"},{"start":125,"end":132,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"paywall":{"text":"This article has been made free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":56,"end":70,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":138,"end":145,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"unbound":{"text":"This article is free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":45,"end":59,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":127,"end":134,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]}},"COVID_BANNER_POST_ID_OVERRIDE_WHITELIST":["3b31a67bff4a"]},"sharedVoteMessaging":{"TAGS":["politics","election-2020","government","us-politics","election","2020-presidential-race","trump","donald-trump","democrats","republicans","congress","republican-party","democratic-party","biden","joe-biden","maga"],"TOPICS":["politics","election"],"MESSAGE":{"text":"Find out more about the U.S. election results here.","markups":[{"start":46,"end":50,"href":"https:\u002F\u002Fcookpolitical.com\u002F2020-national-popular-vote-tracker"}]},"EXCLUDE_POSTS":["397ef29e3ca5"]},"embedPostRules":[],"recircOptions":{"v1":{"limit":3},"v2":{"limit":8}},"braintreeClientKey":"production_zjkj96jm_m56f8fqpf7ngnrd4","braintree":{"enabled":true,"merchantId":"m56f8fqpf7ngnrd4","merchantAccountId":{"usd":"AMediumCorporation_instant","eur":"amediumcorporation_EUR","cad":"amediumcorporation_CAD"},"publicKey":"ds2nn34bg2z7j5gd","braintreeEnvironment":"production","dashboardUrl":"https:\u002F\u002Fwww.braintreegateway.com\u002Fmerchants","gracePeriodDurationInDays":14,"mediumMembershipPlanId":{"monthly":"ce105f8c57a3","monthlyV2":"e8a5e126-792b-4ee6-8fba-d574c1b02fc5","monthlyWithTrial":"d5ee3dbe3db8","monthlyPremium":"fa741a9b47a2","yearly":"a40ad4a43185","yearlyV2":"3815d7d6-b8ca-4224-9b8c-182f9047866e","yearlyStaff":"d74fb811198a","yearlyWithTrial":"b3bc7350e5c7","yearlyPremium":"e21bd2c12166","monthlyOneYearFree":"e6c0637a-2bad-4171-ab4f-3c268633d83c","monthly25PercentOffFirstYear":"235ecc62-0cdb-49ae-9378-726cd21c504b","monthly20PercentOffFirstYear":"ba518864-9c13-4a99-91ca-411bf0cac756","monthly15PercentOffFirstYear":"594c029b-9f89-43d5-88f8-8173af4e070e","monthly10PercentOffFirstYear":"c6c7bc9a-40f2-4b51-8126-e28511d5bdb0","monthlyForStudents":"629ebe51-da7d-41fd-8293-34cd2f2030a8","yearlyOneYearFree":"78ba7be9-0d9f-4ece-aa3e-b54b826f2bf1","yearly25PercentOffFirstYear":"2dbb010d-bb8f-4eeb-ad5c-a08509f42d34","yearly20PercentOffFirstYear":"47565488-435b-47f8-bf93-40d5fbe0ebc8","yearly15PercentOffFirstYear":"8259809b-0881-47d9-acf7-6c001c7f720f","yearly10PercentOffFirstYear":"9dd694fb-96e1-472c-8d9e-3c868d5c1506","yearlyForStudents":"e29345ef-ab1c-4234-95c5-70e50fe6bc23","monthlyCad":"p52orjkaceei","yearlyCad":"h4q9g2up9ktt"},"braintreeDiscountId":{"oneMonthFree":"MONTHS_FREE_01","threeMonthsFree":"MONTHS_FREE_03","sixMonthsFree":"MONTHS_FREE_06","fiftyPercentOffOneYear":"FIFTY_PERCENT_OFF_ONE_YEAR"},"3DSecureVersion":"2","defaultCurrency":"usd","providerPlanIdCurrency":{"4ycw":"usd","rz3b":"usd","3kqm":"usd","jzw6":"usd","c2q2":"usd","nnsw":"usd","q8qw":"usd","d9y6":"usd","fx7w":"cad","nwf2":"cad"}},"paypalClientId":"AXj1G4fotC2GE8KzWX9mSxCH1wmPE3nJglf4Z2ig_amnhvlMVX87otaq58niAg9iuLktVNF_1WCMnN7v","paypal":{"host":"https:\u002F\u002Fapi.paypal.com:443","clientMode":"production","serverMode":"live","webhookId":"4G466076A0294510S","monthlyPlan":{"planId":"P-9WR0658853113943TMU5FDQA","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlan":{"planId":"P-7N8963881P8875835MU5JOPQ","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oneYearGift":{"name":"Medium Membership (1 Year, Digital Gift Code)","description":"Unlimited access to the best and brightest stories on Medium. Gift codes can be redeemed at medium.com\u002Fredeem.","price":"50.00","currency":"USD","sku":"membership-gift-1-yr"},"oldMonthlyPlan":{"planId":"P-96U02458LM656772MJZUVH2Y","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlan":{"planId":"P-59P80963JF186412JJZU3SMI","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"monthlyPlanWithTrial":{"planId":"P-66C21969LR178604GJPVKUKY","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlanWithTrial":{"planId":"P-6XW32684EX226940VKCT2MFA","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oldMonthlyPlanNoSetupFee":{"planId":"P-4N046520HR188054PCJC7LJI","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlanNoSetupFee":{"planId":"P-7A4913502Y5181304CJEJMXQ","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"sdkUrl":"https:\u002F\u002Fwww.paypal.com\u002Fsdk\u002Fjs"},"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","log":{"json":true,"level":"info"},"imageUploadMaxSizeMb":25,"staffPicks":{"title":"Staff Picks","catalogId":"c7bc6e1ee00f"}},"session":{"xsrf":""}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"__typename":"Query","viewer":null,"collectionByDomainOrSlug({\"domainOrSlug\":\"amrelsher07.medium.com\"})":null,"postResult({\"id\":\"37bce4205016\"})":{"__ref":"Post:37bce4205016"}},"LinkedAccounts:a45bdd28e1bf":{"__typename":"LinkedAccounts","mastodon":null,"id":"a45bdd28e1bf"},"NewsletterV3:53a616675d19":{"__typename":"NewsletterV3","id":"53a616675d19","type":"NEWSLETTER_TYPE_AUTHOR","slug":"a45bdd28e1bf","name":"a45bdd28e1bf","collection":null,"user":{"__ref":"User:a45bdd28e1bf"}},"User:a45bdd28e1bf":{"__typename":"User","id":"a45bdd28e1bf","name":"Amr elshaer","username":"amrelsher07","newsletterV3":{"__ref":"NewsletterV3:53a616675d19"},"linkedAccounts":{"__ref":"LinkedAccounts:a45bdd28e1bf"},"isSuspended":false,"imageId":"1*ygu3xtVlw7D7cKsKwM1jWQ.jpeg","customDomainState":{"__typename":"CustomDomainState","live":{"__typename":"CustomDomain","domain":"amrelsher07.medium.com"}},"hasSubdomain":true,"verifications":{"__typename":"VerifiedInfo","isBookAuthor":false},"socialStats":{"__typename":"SocialStats","followerCount":653,"followingCount":768,"collectionFollowingCount":37},"bio":"Software engineer | .Net ,C# ,Angular, Javascript","membership":null,"allowNotes":true,"viewerEdge":{"__ref":"UserViewerEdge:userId:a45bdd28e1bf-viewerId:lo_17ff3b0b5a11"},"twitterScreenName":"AmrElsh97772587"},"Paragraph:c80a0bdafc4_0":{"__typename":"Paragraph","id":"c80a0bdafc4_0","name":"ea15","type":"H3","href":null,"layout":null,"metadata":null,"text":"When should we prefer OwnsMany over HasMany in EF core?","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_1":{"__typename":"Paragraph","id":"c80a0bdafc4_1","name":"e760","type":"P","href":null,"layout":null,"metadata":null,"text":"In Entity Framework Core (EF Core), OwnsMany and HasMany are two different methods used to define relationships between entities. They are used in different scenarios and have distinct implications:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":36,"end":44,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":49,"end":56,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_2":{"__typename":"Paragraph","id":"c80a0bdafc4_2","name":"5416","type":"OLI","href":null,"layout":null,"metadata":null,"text":"HasMany:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":0,"end":7,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_3":{"__typename":"Paragraph","id":"c80a0bdafc4_3","name":"93b5","type":"ULI","href":null,"layout":null,"metadata":null,"text":"HasMany is used to define a one-to-many or many-to-many relationship between two entities.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":0,"end":7,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_4":{"__typename":"Paragraph","id":"c80a0bdafc4_4","name":"3b07","type":"ULI","href":null,"layout":null,"metadata":null,"text":"It is typically used when you have a reference from one entity to another through a navigation property, and you want to specify that there can be multiple related entities on the “many” side of the relationship.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_5":{"__typename":"Paragraph","id":"c80a0bdafc4_5","name":"523e","type":"ULI","href":null,"layout":null,"metadata":null,"text":"For example, if you have a Customer entity with a navigation property Orders, you would use HasMany to specify that a customer can have multiple orders.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":27,"end":35,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":70,"end":76,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":92,"end":99,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_6":{"__typename":"Paragraph","id":"c80a0bdafc4_6","name":"869f","type":"ULI","href":null,"layout":null,"metadata":null,"text":"HasMany is suitable for situations where the related entities have their own independent existence and can be queried, updated, or deleted independently of the owner entity.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":0,"end":7,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":77,"end":172,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_7":{"__typename":"Paragraph","id":"c80a0bdafc4_7","name":"8e27","type":"ULI","href":null,"layout":null,"metadata":null,"text":"example:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*XsUZc4RjlIiy8TBHp858PA.png":{"__typename":"ImageMetadata","id":"1*XsUZc4RjlIiy8TBHp858PA.png","originalHeight":1344,"originalWidth":1230,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:c80a0bdafc4_8":{"__typename":"Paragraph","id":"c80a0bdafc4_8","name":"9dde","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*XsUZc4RjlIiy8TBHp858PA.png"},"text":"HasMany","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_9":{"__typename":"Paragraph","id":"c80a0bdafc4_9","name":"84fc","type":"P","href":null,"layout":null,"metadata":null,"text":"OwnsMany:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":0,"end":8,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_10":{"__typename":"Paragraph","id":"c80a0bdafc4_10","name":"f0e3","type":"ULI","href":null,"layout":null,"metadata":null,"text":"OwnsMany is used to define a relationship where one entity \"owns\" a collection of related entities. The owned entities do not have their own identity in the database, they are treated as part of the owner entity.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":0,"end":8,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_11":{"__typename":"Paragraph","id":"c80a0bdafc4_11","name":"6902","type":"ULI","href":null,"layout":null,"metadata":null,"text":"It is used for modeling complex types or value objects that are logically part of the owning entity and should not have their own separate table with a primary key.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_12":{"__typename":"Paragraph","id":"c80a0bdafc4_12","name":"ada7","type":"ULI","href":null,"layout":null,"metadata":null,"text":"OwnsMany is suitable when the related entities don't have an independent identity and are conceptually owned by the parent entity. Changes to the owner entity are automatically reflected in the owned entities.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":0,"end":8,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":37,"end":209,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_13":{"__typename":"Paragraph","id":"c80a0bdafc4_13","name":"1e59","type":"P","href":null,"layout":null,"metadata":null,"text":"example:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*8TribNaP2BO6M473Xw4g0Q.png":{"__typename":"ImageMetadata","id":"1*8TribNaP2BO6M473Xw4g0Q.png","originalHeight":1254,"originalWidth":1340,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:c80a0bdafc4_14":{"__typename":"Paragraph","id":"c80a0bdafc4_14","name":"e5cc","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*8TribNaP2BO6M473Xw4g0Q.png"},"text":"OwnsMany","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_15":{"__typename":"Paragraph","id":"c80a0bdafc4_15","name":"5dfc","type":"P","href":null,"layout":null,"metadata":null,"text":"In this example, the LineItems(owned) are owned by the Order(Owner), and they are stored as part of the Order record in the database without their own primary key, you can’t do any operation on LineItems without his owner Order.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":21,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":55,"end":67,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":104,"end":109,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_16":{"__typename":"Paragraph","id":"c80a0bdafc4_16","name":"5d1c","type":"P","href":null,"layout":null,"metadata":null,"text":"The choice between using HasMany and OwnsMany depends on the nature of the relationship between the entities and whether the related entities should have their own identity in the database. In the case of the relationship between Order and Customer, it's more appropriate to use HasMany because:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":25,"end":32,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":37,"end":45,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":230,"end":235,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":240,"end":248,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":279,"end":286,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_17":{"__typename":"Paragraph","id":"c80a0bdafc4_17","name":"8b75","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Independence of Identity: Each order placed by a customer is a distinct entity with its own identity. Orders typically have attributes like order date, order number, and possibly more. These attributes make each order unique and distinguishable from other orders. Therefore, orders should have their own identity in the database.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_18":{"__typename":"Paragraph","id":"c80a0bdafc4_18","name":"0857","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Querying and Referential Integrity: Using HasMany allows you to query orders independently of customers. You can retrieve all orders, filter them by various criteria, and perform operations on them without directly affecting the customer entity. Additionally, this approach allows for referential integrity constraints to be enforced, ensuring that orders are associated with valid customers.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":42,"end":49,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_19":{"__typename":"Paragraph","id":"c80a0bdafc4_19","name":"9044","type":"P","href":null,"layout":null,"metadata":null,"text":"On the other hand, OwnsMany is typically used when the related entities are conceptually part of the owner entity and do not have their own independent identity in the database. In the case of Order and LineItem, OwnsMany is appropriate because line items are part of the order and don't exist independently. They are typically embedded within the order's structure and don't have attributes that would warrant their own separate table.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":19,"end":27,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":193,"end":198,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":203,"end":211,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":213,"end":221,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_20":{"__typename":"Paragraph","id":"c80a0bdafc4_20","name":"c170","type":"P","href":null,"layout":null,"metadata":null,"text":"To configure a collection of owned types use OwnsMany in OnModelCreating.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":45,"end":53,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":57,"end":72,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":29,"end":40,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_21":{"__typename":"Paragraph","id":"c80a0bdafc4_21","name":"ff54","type":"P","href":null,"layout":null,"metadata":null,"text":"Owned types need a primary key. If there are no good candidates properties on the .NET type, EF Core can try to create one. However, when owned types are defined through a collection, it isn’t enough to just create a shadow property to act as both the foreign key into the owner and the primary key of the owned instance, as we do for OwnsOne: there can be multiple owned type instances for each owner, and hence the key of the owner isn't enough to provide a unique identity for each owned instance.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":335,"end":342,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":217,"end":232,"href":"https:\u002F\u002Fwww.entityframeworktutorial.net\u002Fefcore\u002Fshadow-property.aspx","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":19,"end":30,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":217,"end":232,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_22":{"__typename":"Paragraph","id":"c80a0bdafc4_22","name":"3677","type":"P","href":null,"layout":null,"metadata":null,"text":"The two most straightforward solutions to this are:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_23":{"__typename":"Paragraph","id":"c80a0bdafc4_23","name":"4f72","type":"ULI","href":null,"layout":null,"metadata":null,"text":"(Uniqueness in the table scope) Defining a surrogate primary key on a new property independent of the foreign key that points to the owner. The contained values would need to be unique across all owners (e.g. if Parent {1} has Child {1}, then Parent {2} cannot have Child {1}), so the value doesn’t have any inherent meaning. Since the foreign key is not part of the primary key its values can be changed, so you could move a child from one parent to another one, however this usually goes against aggregate semantics.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":32,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":43,"end":64,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":0,"end":32,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_24":{"__typename":"Paragraph","id":"c80a0bdafc4_24","name":"5ec2","type":"P","href":null,"layout":null,"metadata":null,"text":"A surrogate key is an artificial or synthetic key used in a database table to uniquely identify each row of data. Unlike natural keys, which are based on existing attributes or columns in the table (e.g., a person’s Social Security Number or a product’s SKU), surrogate keys are typically system-generated and have no inherent meaning or relation to the data they identify. They are solely used for the purpose of ensuring uniqueness and facilitating efficient database operations.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":2,"end":15,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_25":{"__typename":"Paragraph","id":"c80a0bdafc4_25","name":"09d1","type":"P","href":null,"layout":null,"metadata":null,"text":"Key characteristics of surrogate keys include:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_26":{"__typename":"Paragraph","id":"c80a0bdafc4_26","name":"a0c8","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Uniqueness: Surrogate keys must be unique within the table. They ensure that no two rows in the table have the same surrogate key value.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_27":{"__typename":"Paragraph","id":"c80a0bdafc4_27","name":"88ca","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Stability: Surrogate keys typically do not change over time. They provide a stable means of identifying a row even if other attributes or data values change.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_28":{"__typename":"Paragraph","id":"c80a0bdafc4_28","name":"5ae4","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Independence: Surrogate keys are independent of the natural attributes of the data. They are not derived from any inherent characteristics of the entity being modeled.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_29":{"__typename":"Paragraph","id":"c80a0bdafc4_29","name":"242e","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Simplicity: Surrogate keys are often simple and efficient for indexing, querying, and joining tables. They are often integers or numeric values.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_30":{"__typename":"Paragraph","id":"c80a0bdafc4_30","name":"c54d","type":"BQ","href":null,"layout":null,"metadata":null,"text":"Surrogate key is a system-generated identifier used to uniquely identify rows in a database table. It serves as a stable and independent means of ensuring uniqueness, simplifying data management, and improving database performance.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*00T0FIwb8LISp7jqK9MH3w.png":{"__typename":"ImageMetadata","id":"1*00T0FIwb8LISp7jqK9MH3w.png","originalHeight":1298,"originalWidth":1540,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:c80a0bdafc4_31":{"__typename":"Paragraph","id":"c80a0bdafc4_31","name":"0f1f","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*00T0FIwb8LISp7jqK9MH3w.png"},"text":"uniqueness in table scope","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*myh4uYvPobyxih01IW12Gg.png":{"__typename":"ImageMetadata","id":"1*myh4uYvPobyxih01IW12Gg.png","originalHeight":2288,"originalWidth":1840,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:c80a0bdafc4_32":{"__typename":"Paragraph","id":"c80a0bdafc4_32","name":"33df","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*myh4uYvPobyxih01IW12Gg.png"},"text":"migration using a surrogate key","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_33":{"__typename":"Paragraph","id":"c80a0bdafc4_33","name":"17a7","type":"ULI","href":null,"layout":null,"metadata":null,"text":"(Uninquess in the parent(owner) scope)Using the foreign key and an additional property as a composite key. The additional property value now only needs to be unique for a given parent (so if Parent {1} has Child {1,1} then Parent {2} can still have Child {2,1}). By making the foreign key part of the primary key the relationship between the owner and the owned entity becomes immutable and reflects aggregate semantics better. This is what EF Core does by default.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":38,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":428,"end":464,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":0,"end":38,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*9YpaZTxAnGtYeNwfPMsLUw.png":{"__typename":"ImageMetadata","id":"1*9YpaZTxAnGtYeNwfPMsLUw.png","originalHeight":1028,"originalWidth":1540,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:c80a0bdafc4_34":{"__typename":"Paragraph","id":"c80a0bdafc4_34","name":"1471","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*9YpaZTxAnGtYeNwfPMsLUw.png"},"text":"Uniqueness in the parent scope","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*rA2zlnMxtHPYpF-dfRIJLA.png":{"__typename":"ImageMetadata","id":"1*rA2zlnMxtHPYpF-dfRIJLA.png","originalHeight":2154,"originalWidth":1840,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:c80a0bdafc4_35":{"__typename":"Paragraph","id":"c80a0bdafc4_35","name":"6a1e","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*rA2zlnMxtHPYpF-dfRIJLA.png"},"text":"Migration using compose key default in EF core","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_36":{"__typename":"Paragraph","id":"c80a0bdafc4_36","name":"ec96","type":"P","href":null,"layout":null,"metadata":null,"text":"The choice between these two solutions depends on the specific requirements and semantics of your domain model. Solution 1 with a surrogate key is more flexible in terms of moving children between parents, while Solution 2 with a composite key enforces stronger ownership and reflects the domain’s semantics more closely.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:c80a0bdafc4_37":{"__typename":"Paragraph","id":"c80a0bdafc4_37","name":"473d","type":"BQ","href":null,"layout":null,"metadata":null,"text":"Aggregate is a pattern in Domain-Driven Design. A DDD aggregate is a cluster of domain objects that can be treated as a single unit. An example may be an order and its line-items, these will be separate objects, but it’s useful to treat the order (together with its line items) as a single aggregate. Martin Fowler","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":301,"end":314,"href":"https:\u002F\u002Fmartinfowler.com\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"UserViewerEdge:userId:a45bdd28e1bf-viewerId:lo_17ff3b0b5a11":{"__typename":"UserViewerEdge","id":"userId:a45bdd28e1bf-viewerId:lo_17ff3b0b5a11","isMuting":false},"PostViewerEdge:postId:37bce4205016-viewerId:lo_17ff3b0b5a11":{"__typename":"PostViewerEdge","shouldIndexPostForExternalSearch":true,"id":"postId:37bce4205016-viewerId:lo_17ff3b0b5a11"},"Tag:entity-framework-core":{"__typename":"Tag","id":"entity-framework-core","displayTitle":"Entity Framework Core","normalizedTagSlug":"entity-framework-core"},"Tag:csharp":{"__typename":"Tag","id":"csharp","displayTitle":"Csharp","normalizedTagSlug":"csharp"},"Tag:dotnet":{"__typename":"Tag","id":"dotnet","displayTitle":"Dotnet","normalizedTagSlug":"dotnet"},"Tag:domain-driven-design":{"__typename":"Tag","id":"domain-driven-design","displayTitle":"Domain Driven Design","normalizedTagSlug":"domain-driven-design"},"Tag:refactoring":{"__typename":"Tag","id":"refactoring","displayTitle":"Refactoring","normalizedTagSlug":"refactoring"},"Post:37bce4205016":{"__typename":"Post","id":"37bce4205016","collection":null,"content({\"postMeteringOptions\":{\"referrer\":\"\"}})":{"__typename":"PostContent","isLockedPreviewOnly":false,"bodyModel":{"__typename":"RichText","sections":[{"__typename":"Section","name":"afe3","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"4f3a","startIndex":9,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"39a8","startIndex":16,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"c510","startIndex":20,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"d42c","startIndex":37,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null}],"paragraphs":[{"__ref":"Paragraph:c80a0bdafc4_0"},{"__ref":"Paragraph:c80a0bdafc4_1"},{"__ref":"Paragraph:c80a0bdafc4_2"},{"__ref":"Paragraph:c80a0bdafc4_3"},{"__ref":"Paragraph:c80a0bdafc4_4"},{"__ref":"Paragraph:c80a0bdafc4_5"},{"__ref":"Paragraph:c80a0bdafc4_6"},{"__ref":"Paragraph:c80a0bdafc4_7"},{"__ref":"Paragraph:c80a0bdafc4_8"},{"__ref":"Paragraph:c80a0bdafc4_9"},{"__ref":"Paragraph:c80a0bdafc4_10"},{"__ref":"Paragraph:c80a0bdafc4_11"},{"__ref":"Paragraph:c80a0bdafc4_12"},{"__ref":"Paragraph:c80a0bdafc4_13"},{"__ref":"Paragraph:c80a0bdafc4_14"},{"__ref":"Paragraph:c80a0bdafc4_15"},{"__ref":"Paragraph:c80a0bdafc4_16"},{"__ref":"Paragraph:c80a0bdafc4_17"},{"__ref":"Paragraph:c80a0bdafc4_18"},{"__ref":"Paragraph:c80a0bdafc4_19"},{"__ref":"Paragraph:c80a0bdafc4_20"},{"__ref":"Paragraph:c80a0bdafc4_21"},{"__ref":"Paragraph:c80a0bdafc4_22"},{"__ref":"Paragraph:c80a0bdafc4_23"},{"__ref":"Paragraph:c80a0bdafc4_24"},{"__ref":"Paragraph:c80a0bdafc4_25"},{"__ref":"Paragraph:c80a0bdafc4_26"},{"__ref":"Paragraph:c80a0bdafc4_27"},{"__ref":"Paragraph:c80a0bdafc4_28"},{"__ref":"Paragraph:c80a0bdafc4_29"},{"__ref":"Paragraph:c80a0bdafc4_30"},{"__ref":"Paragraph:c80a0bdafc4_31"},{"__ref":"Paragraph:c80a0bdafc4_32"},{"__ref":"Paragraph:c80a0bdafc4_33"},{"__ref":"Paragraph:c80a0bdafc4_34"},{"__ref":"Paragraph:c80a0bdafc4_35"},{"__ref":"Paragraph:c80a0bdafc4_36"},{"__ref":"Paragraph:c80a0bdafc4_37"}]},"validatedShareKey":"","shareKeyCreator":null},"creator":{"__ref":"User:a45bdd28e1bf"},"inResponseToEntityType":null,"isLocked":false,"isMarkedPaywallOnly":false,"lockedSource":"LOCKED_POST_SOURCE_NONE","mediumUrl":"https:\u002F\u002Famrelsher07.medium.com\u002Fwhen-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016","primaryTopic":null,"topics":[{"__typename":"Topic","slug":"programming"}],"isLimitedState":false,"isPublished":true,"allowResponses":true,"responsesLocked":false,"visibility":"PUBLIC","latestPublishedVersion":"c80a0bdafc4","postResponses":{"__typename":"PostResponses","count":1},"responseDistribution":"NOT_DISTRIBUTED","clapCount":100,"title":"When should we prefer OwnsMany over HasMany in EF core?","isSeries":false,"sequence":null,"uniqueSlug":"when-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016","socialTitle":"","socialDek":"","canonicalUrl":"https:\u002F\u002Famrelsher07.medium.com\u002Fwhen-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016","metaDescription":"","latestPublishedAt":1694869460130,"readingTime":5.153773584905661,"previewContent":{"__typename":"PreviewContent","subtitle":"In Entity Framework Core (EF Core), OwnsMany and HasMany are two different methods used to define relationships between entities. They are…"},"previewImage":{"__ref":"ImageMetadata:1*XsUZc4RjlIiy8TBHp858PA.png"},"isShortform":false,"seoMetaTags":{"__typename":"SEOMetaTags","jsonLd":"{\"@context\":\"https:\u002F\u002Fschema.org\",\"@id\":\"https:\u002F\u002Famrelsher07.medium.com\u002Fwhen-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016\",\"@type\":\"SocialMediaPosting\",\"image\":[\"https:\u002F\u002Fmiro.medium.com\u002F1*XsUZc4RjlIiy8TBHp858PA.png\"],\"url\":\"https:\u002F\u002Famrelsher07.medium.com\u002Fwhen-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016\",\"dateCreated\":\"2023-09-16T13:04:20Z\",\"datePublished\":\"2023-09-16T13:04:20Z\",\"dateModified\":\"2023-09-16T13:04:20Z\",\"headline\":\"When should we prefer OwnsMany over HasMany in EF core?\",\"name\":\"When should we prefer OwnsMany over HasMany in EF core?\",\"description\":\"When should we prefer OwnsMany over HasMany in EF core? In Entity Framework Core (EF Core), OwnsMany and HasMany are two different methods used to define relationships between entities. They are used …\",\"identifier\":\"37bce4205016\",\"author\":{\"@context\":\"https:\u002F\u002Fschema.org\",\"@id\":\"https:\u002F\u002Fmedium.com\u002F@amrelsher07\",\"@type\":\"Person\",\"identifier\":\"amrelsher07\",\"name\":\"Amr elshaer\",\"url\":\"https:\u002F\u002Fmedium.com\u002F@amrelsher07\"},\"creator\":{\"@context\":\"https:\u002F\u002Fschema.org\",\"@id\":\"https:\u002F\u002Fmedium.com\u002F@amrelsher07\",\"@type\":\"Person\",\"identifier\":\"amrelsher07\",\"name\":\"Amr elshaer\",\"url\":\"https:\u002F\u002Fmedium.com\u002F@amrelsher07\"},\"publisher\":{\"@context\":\"https:\u002F\u002Fschema.org\",\"@type\":\"Organization\",\"@id\":\"https:\u002F\u002Fmedium.com\",\"name\":\"Medium\",\"url\":\"https:\u002F\u002Fmedium.com\",\"logo\":{\"@type\":\"ImageObject\",\"width\":500,\"height\":110,\"url\":\"https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:500\u002F7%2AV1_7XP4snlmqrc_0Njontw.png\"}},\"mainEntityOfPage\":\"https:\u002F\u002Famrelsher07.medium.com\u002Fwhen-should-we-prefer-ownsmany-over-hasmany-in-ef-core-37bce4205016\",\"isAccessibleForFree\":true}"},"seoDescription":"When should we prefer OwnsMany over HasMany in EF core? In Entity Framework Core (EF Core), OwnsMany and HasMany are two different methods used to define relationships between entities. They are used …","shortformType":"SHORTFORM_TYPE_LINK","firstPublishedAt":1694869460130,"viewerEdge":{"__ref":"PostViewerEdge:postId:37bce4205016-viewerId:lo_17ff3b0b5a11"},"seoTitle":"","isSuspended":false,"license":"ALL_RIGHTS_RESERVED","tags":[{"__ref":"Tag:entity-framework-core"},{"__ref":"Tag:csharp"},{"__ref":"Tag:dotnet"},{"__ref":"Tag:domain-driven-design"},{"__ref":"Tag:refactoring"}],"isFeaturedInPublishedPublication":false,"isNewsletter":false,"statusForCollection":null,"pendingCollection":null,"detectedLanguage":"en","wordCount":1114}}</script><script>window.__MIDDLEWARE_STATE__={"session":{"xsrf":""},"cache":{"cacheStatus":"HIT"}}</script><script src="https://cdn-client.medium.com/lite/static/js/manifest.d6724dea.js"></script><script src="https://cdn-client.medium.com/lite/static/js/723.128cd04d.js"></script><script src="https://cdn-client.medium.com/lite/static/js/main.47d7fa87.js"></script><script src="https://cdn-client.medium.com/lite/static/js/5052.eb638269.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/628.add32a62.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6062.c3638afc.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7566.14491814.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3777.af05bea9.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7908.9ea3c3f3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3927.2f9f3eed.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8640.9dfdf08f.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9967.08537ce5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3862.a0fe9068.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6372.c6e20496.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3371.bd59c539.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3404.d2326e3a.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7381.c53435ab.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9347.a42e3f87.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4929.2040a04e.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6834.6c66e3cc.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8441.773bce63.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3877.769556c7.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7979.35c5b2af.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7975.3f8d607c.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9256.c0f021df.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8768.71979c5d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6509.24ccb2bc.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4269.56ac711a.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3666.122df09d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/1069.bbe95674.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6026.904e1f2d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7695.47976815.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostPage.MainContent.2a6e2348.chunk.js"></script>
<script id="__LOADABLE_REQUIRED_CHUNKS__" type="application/json">[6183,2951,2698,3974,2527,2886,5258]</script>
<script id="__LOADABLE_REQUIRED_CHUNKS___ext" type="application/json">{"namedChunks":["instrumentation","reporting","PostResponsesContent","responses.editor"]}</script>
<script async="" data-chunk="instrumentation" src="https://cdn-client.medium.com/lite/static/js/instrumentation.434115b9.chunk.js"></script>
<script async="" data-chunk="reporting" src="https://cdn-client.medium.com/lite/static/js/reporting.851fdaca.chunk.js"></script>
<script async="" data-chunk="PostResponsesContent" src="https://cdn-client.medium.com/lite/static/js/2698.9eecb474.chunk.js"></script>
<script async="" data-chunk="PostResponsesContent" src="https://cdn-client.medium.com/lite/static/js/3974.82493a33.chunk.js"></script>
<script async="" data-chunk="PostResponsesContent" src="https://cdn-client.medium.com/lite/static/js/2527.ed913434.chunk.js"></script>
<script async="" data-chunk="PostResponsesContent" src="https://cdn-client.medium.com/lite/static/js/PostResponsesContent.e940a3b4.chunk.js"></script>
<script async="" data-chunk="responses.editor" src="https://cdn-client.medium.com/lite/static/js/responses.editor.d61aa7c4.chunk.js"></script><script>window.main();</script></body></html>